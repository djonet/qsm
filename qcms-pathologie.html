<!DOCTYPE html>
<html lang="fr">
<head>
<!-- üîí ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿµŸÅÿ≠ÿ© ÿ®ŸÄ Firebase -->
<script type="module">
  import { initializeApp, getApps } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBldr32JPJGdMyZZBT1PD2eHvE48QkVtU8",
    authDomain: "qcm-djo.firebaseapp.com",
    projectId: "qcm-djo",
    storageBucket: "qcm-djo.firebasestorage.app",
    messagingSenderId: "384943172069",
    appId: "1:384943172069:web:6b59c1b9b31f2fe097a70c",
    measurementId: "G-13MC1GT4HM"
  };

  document.documentElement.style.visibility = 'hidden';

  const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db   = getFirestore(app);

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.replace('index.html');
      return;
    }
    try {
      const ref  = doc(db, 'allowedUsers', user.uid);
      const snap = await getDoc(ref);

      if (snap.exists()) {
        document.documentElement.style.visibility = 'visible';
      } else {
        window.location.replace('welcome.html?status=pending');
      }
    } catch (e) {
      console.error('Firebase Auth Error:', e);
      window.location.replace('welcome.html?status=pending');
    }
  });
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anatomie Humaine - Qcms BY DJO</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
  body {
    font-family: 'Cairo', sans-serif;
    direction: rtl;
    background: radial-gradient(circle at top,#d9faff,#aee4f5,#7fd4e8);
    margin: 0; padding: 20px; color: white;
  }
  .container {
    background: rgba(0,0,0,0.55);
    padding: 25px;
    border-radius: 20px;
    backdrop-filter: blur(15px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.7);
    max-width: 900px;
    margin: auto;
    text-align: center;
  }
  h2,h3 { margin-bottom: 10px; }

  .question-block {
    background: rgba(30,30,30,0.85);
    border-radius: 12px;
    margin: 20px 0;
    padding: 20px;
    text-align: right;
    transition: transform 0.3s;
  }
  .question-block:hover { transform: scale(1.02); }

  @keyframes starFade {
    0% { transform: scale(0); opacity: 0; }
    60% { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }
  .difficulty { margin-bottom: 8px; text-align: left; }
  .star {
    font-size: 22px;
    display: inline-block;
    color: gold;
    opacity: 0;
    animation: starFade 0.5s forwards;
  }
  .star:nth-child(1){animation-delay:0.1s;}
  .star:nth-child(2){animation-delay:0.2s;}
  .star:nth-child(3){animation-delay:0.3s;}
  .star:nth-child(4){animation-delay:0.4s;}
  .star:nth-child(5){animation-delay:0.5s;}

  .question-text { font-weight: bold; margin-bottom: 15px; font-size: 18px; }
  .answers { display: grid; gap: 10px; }
  .answer {
    background: rgba(255,255,255,0.12);
    padding: 14px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.25s ease;
    border: 1px solid transparent;
    color: white;
    user-select: none;
  }
  .answer:hover { background: rgba(255,255,255,0.25); transform: scale(1.02); }
  .answer.selected {
    background: linear-gradient(135deg,#0096c7,#00b4d8);
    color: black;
    border: 1px solid #48cae4;
    box-shadow: 0 0 12px rgba(72,202,228,0.7);
    transform: scale(1.04);
  }
  .correct {
    background: linear-gradient(135deg,#00e676,#00c853)!important;
    color: black!important;
  }
  .incorrect {
    background: linear-gradient(135deg,#ef5350,#c62828)!important;
    color: black!important;
  }
  .feedback {
    margin-top: 10px;
    padding: 10px;
    border-radius: 10px;
    text-align: center;
    font-weight: bold;
    color: black;
    animation: pulse 1s ease;
  }
  @keyframes pulse {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  .feedback.correct { background: rgba(0,200,0,0.3); }
  .feedback.incorrect { background: rgba(200,0,0,0.3); }

  .control-buttons {
    display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;
  }
  .control-buttons button {
    flex: 1; min-width: 100px; padding: 10px;
    border: none; border-radius: 10px;
    background: linear-gradient(135deg,#00b4d8,#48cae4);
    color: white; font-weight: bold;
    cursor: pointer; transition: 0.3s;
  }
  .control-buttons button:hover { transform: scale(1.05); }

  @media(max-width:600px){
    body{padding:10px;}
    .container{width:95%;padding:15px;}
    .question-text{font-size:16px;}
    .answer{font-size:15px;padding:10px;}
    .control-buttons{flex-direction:column;}
  }
</style>
</head>

<body>
<div class="container">
  <h3 id="lessonTitle"></h3>
  <div id="questionsContainer"></div>
  <button class="control-buttons" style="background:#444;margin-top:20px" onclick="goBack()">üîô ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿØÿ±Ÿàÿ≥</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
  // üß© ÿ•ÿπÿØÿßÿØ ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
  localStorage.setItem('specialty','ÿ∑ÿ® ÿßŸÑÿ£ÿ≥ŸÜÿßŸÜ');
  localStorage.setItem('level','ÿ≥ŸÜÿ© 2');
  localStorage.setItem('subject','Anatomie humaine');

  const lesson = localStorage.getItem('lesson') || 'Os frontal et √©thmo√Øde';
  document.getElementById('lessonTitle').textContent = `ÿßŸÑÿØÿ±ÿ≥: ${lesson}`;

  // üß† ÿ£ÿ≥ÿ¶ŸÑÿ© ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©
  const questionsData = {
  'Cabinet Dentaire et Dispositifs chirurgicaux': [
  // A. Bon √©l√®ve ‚≠ê
  {
    question: "Le secr√©tariat/accueil est d√©crit comme un lieu d‚Äôaccueil et d‚Äôinformation, zone √† faible risque sanitaire‚Ä¶",
    difficulty: 1,
    answers: [
      { text: "A. Lieu d‚Äôaccueil, d‚Äôinformation et d‚Äô√©changes", correct: true },
      { text: "B. Obligatoirement s√©par√© par des parois plomb√©es", correct: false },
      { text: "C. Salle d√©di√©e avec vitrine ou comptoir √† l‚Äôentr√©e", correct: true },
      { text: "D. Zone √† faible risque sanitaire", correct: true }
    ]
  },
  {
    question: "La salle d‚Äôattente : proximit√©, visibilit√©, am√©nagements‚Ä¶",
    difficulty: 1,
    answers: [
      { text: "A. Proche de l‚Äôentr√©e et visible du secr√©tariat", correct: true },
      { text: "B. Interdiction de t√©l√©viseur", correct: false },
      { text: "C. Mobilier design possible si hygi√®ne respect√©e", correct: true },
      { text: "D. Accol√©e au local de st√©rilisation", correct: false }
    ]
  },
  {
    question: "La salle de soins (op√©ratoire) :",
    difficulty: 1,
    answers: [
      { text: "A. Fauteuil central pour circulation", correct: true },
      { text: "B. √âclairage suffisant et scialytique", correct: true },
      { text: "C. Zone active √† haut risque, hygi√®ne primordiale", correct: true },
      { text: "D. R√©serv√©e aux soins non invasifs", correct: false }
    ]
  },
  {
    question: "Local radio et local √† d√©chets :",
    difficulty: 1,
    answers: [
      { text: "A. Local radio s√©curis√© et prot√©g√©", correct: true },
      { text: "B. Local radio hors cabinet", correct: false },
      { text: "C. Local d√©chets : marche en avant, 2 portes", correct: true },
      { text: "D. Nettoyage √† grande eau, s√©curit√© contre vols", correct: true }
    ]
  },
  {
    question: "Conditions atmosph√©riques :",
    difficulty: 1,
    answers: [
      { text: "A. Temp√©rature 18‚Äì22 ¬∞C", correct: true },
      { text: "B. Humidit√© 40‚Äì60 %", correct: true },
      { text: "C. Ventilation constante et renouvel√©e", correct: true },
      { text: "D. Interdiction du renouvellement d‚Äôair", correct: false }
    ]
  },

  // B. Tr√®s bon √©l√®ve ‚≠ê‚≠ê
  {
    question: "La marche en avant (st√©rilisation/d√©chets) :",
    difficulty: 2,
    answers: [
      { text: "A. Entr√©e zone sale ‚Üí propre ‚Üí st√©rile", correct: true },
      { text: "B. Retour des DM st√©riles vers la zone sale", correct: false },
      { text: "C. Local d√©chets avec entr√©es/sorties distinctes", correct: true },
      { text: "D. Id√©alement local √† deux issues", correct: true }
    ]
  },
  {
    question: "Circulation au cabinet :",
    difficulty: 2,
    answers: [
      { text: "A. Circuits crois√©s uniquement en salle de soins", correct: true },
      { text: "B. Patient hors st√©rilisation/radiologie", correct: true },
      { text: "C. Patient croise instruments si accompagn√©", correct: false },
      { text: "D. Sens unique pour DM et st√©rilisation", correct: true }
    ]
  },
  {
    question: "Circulation du patient :",
    difficulty: 2,
    answers: [
      { text: "A. Accueil ‚Üí attente ‚Üí soins ‚Üí sortie", correct: true },
      { text: "B. Peut visiter st√©rilisation (non)", correct: false },
      { text: "C. Ne croise jamais l‚Äôinstrumentation", correct: true },
      { text: "D. Peut passer par local d√©chets", correct: false }
    ]
  },
  {
    question: "Circulation de l‚Äôassistant(e) et des instruments :",
    difficulty: 2,
    answers: [
      { text: "A. Flux codifi√© pour l‚Äôassistant(e)", correct: true },
      { text: "B. S√©parer sale et propre", correct: true },
      { text: "C. Instruments propres/sales non crois√©s", correct: true },
      { text: "D. Croisement encourag√©", correct: false }
    ]
  },
  {
    question: "Zonage d‚Äôhygi√®ne :",
    difficulty: 2,
    answers: [
      { text: "A. Zones prot√©g√©es : soins, st√©rilisation, chirurgie, radio", correct: true },
      { text: "B. Potentiellement contamin√©es : d√©chets, entretien, WC", correct: true },
      { text: "C. Administratives : secr√©tariat, attente, vestiaires", correct: true },
      { text: "D. Tout le cabinet = prot√©g√©", correct: false }
    ]
  },
  {
    question: "Environnement : lumi√®re et son.",
    difficulty: 2,
    answers: [
      { text: "A. Scialytique zone op√©ratoire", correct: true },
      { text: "B. Bruit : turbines/aspiration", correct: true },
      { text: "C. Isolation + musique apaisante", correct: true },
      { text: "D. Aucun traitement du bruit", correct: false }
    ]
  },
  {
    question: "Surfaces et peinture :",
    difficulty: 2,
    answers: [
      { text: "A. Sols/murs lavables", correct: true },
      { text: "B. Couleurs : blanc cass√©, bleu, vert", correct: true },
      { text: "C. Couleurs chaudes/froides : effet distance", correct: true },
      { text: "D. Peinture mate interdite", correct: false }
    ]
  },
  {
    question: "Accessibilit√© handicap :",
    difficulty: 2,
    answers: [
      { text: "A. WC adapt√©, lave-mains automatique", correct: true },
      { text: "B. Couloirs larges accessibles", correct: true },
      { text: "C. Fauteuil anti-allerg√©nique", correct: false },
      { text: "D. Salle attente au sous-sol", correct: false }
    ]
  },
  {
    question: "√âl√©ments obligatoires/optionnels :",
    difficulty: 2,
    answers: [
      { text: "A. N√©cessaires : accueil, soins, st√©rilisation, stockage, WC", correct: true },
      { text: "B. Optionnels : bureau, radio, chirurgie, labo, pr√©vention", correct: true },
      { text: "C. Vestiaires plomb√©s obligatoires", correct: false },
      { text: "D. Salle de chirurgie obligatoire", correct: false }
    ]
  },
  {
    question: "√âquipements du cabinet :",
    difficulty: 2,
    answers: [
      { text: "A. Fauteuil + aspiration chirurgicale", correct: true },
      { text: "B. Radiographie + table instruments", correct: true },
      { text: "C. St√©rilisation + mat√©riel chirurgical", correct: true },
      { text: "D. H√©modialyse dentaire", correct: false }
    ]
  },

  // C. Excellent ‚≠ê‚≠ê‚≠ê
  {
    question: "Fauteuil dentaire :",
    difficulty: 3,
    answers: [
      { text: "A. Acc√®s facile et confort patient", correct: true },
      { text: "B. R√©glages ergonomiques", correct: true },
      { text: "C. Commande √©lectrique/p√©dale + scialytique mobile", correct: true },
      { text: "D. Crachoir = aspiration chirurgicale", correct: false }
    ]
  },
  {
    question: "Aspirateur chirurgical et pompe √† salive :",
    difficulty: 3,
    answers: [
      { text: "A. Incorpor√©, puissant, canule m√©tal/plastique", correct: true },
      { text: "B. Indispensable en chirurgie", correct: true },
      { text: "C. Pompe √† salive cit√©e distinctement", correct: true },
      { text: "D. R√©serv√© √† radiologie", correct: false }
    ]
  },
  {
    question: "Mat√©riel de st√©rilisation :",
    difficulty: 3,
    answers: [
      { text: "A. Ultrasons + auto-laveur-d√©sinfecteur", correct: true },
      { text: "B. Thermo-soudeuse + gaines + autoclave", correct: true },
      { text: "C. Four Poupinel obligatoire", correct: false },
      { text: "D. Bac glutarald√©hyde impos√©", correct: false }
    ]
  },
  {
    question: "Mat√©riel de base :",
    difficulty: 3,
    answers: [
      { text: "A. Miroir, pr√©celle, sonde", correct: true },
      { text: "B. Seringues m√©talliques, carpules, aiguilles", correct: true },
      { text: "C. Champs op√©ratoires, EPI", correct: true },
      { text: "D. Oxym√®tre jetable", correct: false }
    ]
  },
  {
    question: "Extraction simple :",
    difficulty: 3,
    answers: [
      { text: "A. Syndesmotome, √©l√©vateur", correct: true },
      { text: "B. Daviers, curettes", correct: true },
      { text: "C. Pince gouge (non)", correct: false },
      { text: "D. Turbine haute vitesse (non)", correct: false }
    ]
  },
  {
    question: "Chirurgie muqueuse ‚Äî bistouri/ciseaux :",
    difficulty: 3,
    answers: [
      { text: "A. Bistouri √† lames interchangeables", correct: true },
      { text: "B. Ciseaux dissection et fils", correct: true },
      { text: "C. Ciseaux ost√©osynth√®se = fils acier", correct: true },
      { text: "D. Ciseaux osseux uniquement", correct: false }
    ]
  },
  {
    question: "Chirurgie muqueuse ‚Äî pinces/d√©colleurs/sutures :",
    difficulty: 3,
    answers: [
      { text: "A. Pince √† diss√©quer (avec/sans griffes)", correct: true },
      { text: "B. Pince h√©mostatique : clampe vaisseaux", correct: true },
      { text: "C. D√©colleurs : laminent la muqueuse (faux)", correct: false },
      { text: "D. Porte-aiguille, fils, √©carteurs", correct: true }
    ]
  },
  {
    question: "Chirurgie osseuse ‚Äî instruments rotatifs :",
    difficulty: 3,
    answers: [
      { text: "A. Pi√®ces √† main 12 000‚Äì20 000 tr/min", correct: true },
      { text: "B. Turbines ‚âà 30 000 tr/min sur dent", correct: true },
      { text: "C. Turbines pour fraisage osseux (faux)", correct: false },
      { text: "D. Pi√®ces √† main non r√©glables (faux)", correct: false }
    ]
  },
  {
    question: "Chirurgie osseuse ‚Äî instruments actifs :",
    difficulty: 3,
    answers: [
      { text: "A. Curettes : curetage osseux", correct: true },
      { text: "B. R√¢pes √† l‚Äôos : r√©gularisation", correct: true },
      { text: "C. Pince gouge : ex√©r√®se tissus durs", correct: true },
      { text: "D. Curettes : coupent fils (faux)", correct: false }
    ]
  },
  {
    question: "Radioprotection et s√©curit√© :",
    difficulty: 3,
    answers: [
      { text: "A. Local radio prot√©g√©", correct: true },
      { text: "B. Double porte plomb√©e secr√©tariat (non)", correct: false },
      { text: "C. Patient ne visite pas radiologie", correct: true },
      { text: "D. Hors zone clinique (non)", correct: false }
    ]
  },

  // D. Difficiles ‚≠ê‚≠ê‚≠ê‚≠ê
  {
    question: "Plan et ergonomie du cabinet :",
    difficulty: 4,
    answers: [
      { text: "A. Fonctionnel, esth√©tique, confortable", correct: true },
      { text: "B. Adapt√© √† hygi√®ne, accessibilit√©, √©cologie", correct: true },
      { text: "C. Circulations encombr√©es", correct: false },
      { text: "D. Acc√®s facile et √©volutif", correct: true }
    ]
  },
  {
    question: "Organisation des locaux :",
    difficulty: 4,
    answers: [
      { text: "A. Prot√©g√©es : soins/st√©rilisation/chirurgie/radio", correct: true },
      { text: "B. Potentiellement contamin√©es : DASRI, WC, entretien", correct: true },
      { text: "C. Administratives : secr√©tariat, attente, vestiaires", correct: true },
      { text: "D. Mobilier maximal", correct: false }
    ]
  },
  {
    question: "Stockage et archives :",
    difficulty: 4,
    answers: [
      { text: "A. Zone de stockage pour mat√©riel/archives", correct: true },
      { text: "B. Salle plomb√©e obligatoire (non)", correct: false },
      { text: "C. Non zone de soins", correct: true },
      { text: "D. Produits sensibles non list√©s", correct: true }
    ]
  },
  {
    question: "Accueil, attente et ergonomie :",
    difficulty: 4,
    answers: [
      { text: "A. Attente visible du secr√©tariat", correct: true },
      { text: "B. Accueil = zone faible risque", correct: true },
      { text: "C. Attente = murs opaques (faux)", correct: false },
      { text: "D. Secr√©tariat dans radio (faux)", correct: false }
    ]
  },
  {
    question: "Couloirs et accessibilit√© :",
    difficulty: 4,
    answers: [
      { text: "A. Indispensables √† la circulation", correct: true },
      { text: "B. Larges pour handicap", correct: true },
      { text: "C. Marche en avant sans croisement", correct: true },
      { text: "D. Stockage DASRI", correct: false }
    ]
  },
  {
    question: "Gestion du bruit :",
    difficulty: 4,
    answers: [
      { text: "A. Sources : turbines/aspiration", correct: true },
      { text: "B. Vitrage + musique apaisante", correct: true },
      { text: "C. Silence total impos√©", correct: false },
      { text: "D. R√©duction du bruit prioritaire", correct: true }
    ]
  },
  {
    question: "Peinture et couleurs :",
    difficulty: 4,
    answers: [
      { text: "A. Couleurs claires favorables", correct: true },
      { text: "B. Chaudes = rapprochement, froides = √©loignement", correct: true },
      { text: "C. Blanc cass√©, bleu, vert recommand√©s", correct: true },
      { text: "D. Rouge vif impos√©", correct: false }
    ]
  },
  {
    question: "Instrumentation et plateaux :",
    difficulty: 4,
    answers: [
      { text: "A. Plateau int√©gr√© au fauteuil", correct: true },
      { text: "B. Plateau d‚Äôexamen (miroir, pr√©celle, sonde)", correct: true },
      { text: "C. Aspiration dissoci√©e (faux)", correct: false },
      { text: "D. Mat√©riel de r√©animation possible", correct: true }
    ]
  },
  {
    question: "Flux et deux issues :",
    difficulty: 4,
    answers: [
      { text: "A. Instruments propres/sales s√©par√©s", correct: true },
      { text: "B. Sens unique pour circuits", correct: true },
      { text: "C. Marche en avant : st√©rilisation et d√©chets", correct: true },
      { text: "D. Retour DM st√©riles vers zone sale", correct: false }
    ]
  },
  {
    question: "Toilettes et mobilier :",
    difficulty: 4,
    answers: [
      { text: "A. Sanitaires faciles √† nettoyer", correct: true },
      { text: "B. Peu de meubles (hygi√®ne)", correct: true },
      { text: "C. Bois brut non lessivable", correct: false },
      { text: "D. Sols/murs r√©sistants d√©sinfection", correct: true }
    ]
  },

  // E. Tr√®s difficiles ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
  {
    question: "Marche en avant et circuits combin√©s :",
    difficulty: 5,
    answers: [
      { text: "A. Sens unique patient/DM", correct: true },
      { text: "B. Croisement autoris√© (non)", correct: false },
      { text: "C. Un seul chevauchement : salle de soins", correct: true },
      { text: "D. Local st√©rilisation √† deux issues", correct: true }
    ]
  },
   {
    question: "Diff√©renciation des zones (prot√©g√©es/potentiellement contamin√©es/administratives) et implications pratiques :",
    difficulty: 5,
    answers: [
      { text: "A. D√©sinfection scrupuleuse en zones prot√©g√©es (soins, st√©rilisation, chirurgie, radiologie)", correct: true },
      { text: "B. Local d√©chets, premi√®re partie st√©rilisation et WC = zones potentiellement contamin√©es", correct: true },
      { text: "C. Zones administratives = secr√©tariat, bureaux, salle d‚Äôattente, vestiaires", correct: true },
      { text: "D. Toutes les zones trait√©es comme 'prot√©g√©es' pendant l‚Äôouverture", correct: false }
    ]
  },
  {
    question: "Sp√©cificit√©s du fauteuil et p√©riph√©riques (int√©gration/ergonomie) :",
    difficulty: 5,
    answers: [
      { text: "A. Scialytique fix√© sur bras mobile ; r√©glages dossier/t√™ti√®re/hauteur", correct: true },
      { text: "B. Crachoir : draine l‚Äôeau utilis√©e par le patient", correct: true },
      { text: "C. Aspirateur chirurgical int√©gr√©, puissant, canule m√©tal/plastique", correct: true },
      { text: "D. Crachoir remplace aspiration chirurgicale", correct: false }
    ]
  },
  {
    question: "Instruments rotatifs et actifs ‚Äî pi√®ges de formulation :",
    difficulty: 5,
    answers: [
      { text: "A. Pi√®ces √† main/contre-angles 12 000‚Äì20 000 tr/min : tissus dentaires et osseux", correct: true },
      { text: "B. Turbines 30 000 tr/min uniquement sur la dent", correct: true },
      { text: "C. R√¢pes √† l‚Äôos : r√©gularisent la surface", correct: true },
      { text: "D. Curettes pour couper fils (faux)", correct: false }
    ]
  },
  {
    question: "Coh√©rence globale ¬´ plan ‚Äì environnement ‚Äì organisation ‚Äì dispositif ¬ª :",
    difficulty: 5,
    answers: [
      { text: "A. Plan fonctionnel + ergonomie = productivit√©, s√©curit√©, acc√®s facile", correct: true },
      { text: "B. Environnement : temp√©rature 18‚Äì22 ¬∞C, humidit√© 40‚Äì60 %, ventilation constante", correct: true },
      { text: "C. Organisation : circuits √† sens unique et zonage hygi√©nique", correct: true },
      { text: "D. Substituer la st√©rilisation par rin√ßage si ventilation bonne", correct: false }
    ]
  }
],

    'Syst√®me nerveux': [
      {
        question: 'ŸÖÿß ŸáŸà ÿßŸÑÿ¨ÿ≤ÿ° ŸÖŸÜ ÿßŸÑÿØŸÖÿßÿ∫ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ ÿπŸÜ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜÿü',
        difficulty: 1,
        answers: [
          { text: 'ÿßŸÑŸÖÿÆŸäÿÆ', correct: true },
          { text: 'ÿßŸÑŸÜÿÆÿßÿπ ÿßŸÑŸÖÿ≥ÿ™ÿ∑ŸäŸÑ', correct: false },
          { text: 'ÿßŸÑŸÖŸáÿßÿØ', correct: false },
          { text: 'ÿßŸÑŸÇÿ¥ÿ±ÿ© ÿßŸÑŸÖÿÆŸäÿ©', correct: false }
        ]
      },
      {
        question: 'ŸÖÿß ŸáŸà ÿßŸÑÿπÿµÿ® ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ ÿπŸÜ ÿßŸÑÿ±ÿ§Ÿäÿ©ÿü',
        difficulty: 2,
        answers: [
          { text: 'ÿßŸÑÿπÿµÿ® ÿßŸÑÿ≥ŸÖÿπŸä', correct: false },
          { text: 'ÿßŸÑÿπÿµÿ® ÿßŸÑÿ®ÿµÿ±Ÿä', correct: true },
          { text: 'ÿßŸÑÿπÿµÿ® ÿßŸÑŸàÿ¨ŸáŸä', correct: false },
          { text: 'ÿßŸÑÿπÿµÿ® ÿßŸÑÿ≠ÿßÿ¶ÿ±', correct: false }
        ]
      }
      // ‚ûï ÿ£ÿ∂ŸÅ ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸáŸÜÿß
    ]
  };

  const questions = questionsData[lesson] || [];
  const container = document.getElementById("questionsContainer");

  questions.forEach((q) => {
    const block = document.createElement("div");
    block.className = "question-block";
    const selectedAnswers = new Set();
    const correctAnswers = q.answers.filter(a => a.correct).map(a => a.text);

    let starsHTML = "";
    for (let s = 1; s <= 5; s++) {
      starsHTML += `<span class="star" style="color:${s <= q.difficulty ? 'gold' : 'rgba(255,255,255,0.2)'};">‚òÖ</span>`;
    }

    block.innerHTML = `
      <div class="difficulty">${starsHTML}</div>
      <div class="question-text">${q.question}</div>
      <div class="answers">
        ${q.answers.map(a => `<div class="answer">${a.text}</div>`).join("")}
      </div>
      <div class="control-buttons">
        <button class="submit">‚úÖ Ÿáÿ∞Ÿá ŸáŸä ÿ•ÿ¨ÿßÿ®ÿ™Ÿä</button>
        <button class="reset">üîÅ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©</button>
        <button class="show-solution" style="display:none;">üí° ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©</button>
      </div>
    `;

    const answersDivs = block.querySelectorAll(".answer");
    answersDivs.forEach(ans => {
      ans.onclick = () => {
        ans.classList.toggle("selected");
        const text = ans.textContent;
        if (selectedAnswers.has(text)) selectedAnswers.delete(text);
        else selectedAnswers.add(text);
      };
    });

    block.querySelector(".submit").onclick = () => {
      const selected = Array.from(selectedAnswers);
      block.querySelectorAll(".feedback").forEach(fb => fb.remove());
      const feedback = document.createElement("div");
      feedback.className = "feedback";

      if (selected.length === 0) {
        feedback.textContent = "‚ùó ŸÑŸÖ ÿ™ÿÆÿ™ÿ± ÿ£Ÿä ÿ•ÿ¨ÿßÿ®ÿ©";
        feedback.classList.add("incorrect");
      } else if (selected.length === correctAnswers.length && selected.every(t => correctAnswers.includes(t))) {
        feedback.textContent = "‚úÖ ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ÿµÿ≠Ÿäÿ≠ÿ©!";
        feedback.classList.add("correct");
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      } else {
        feedback.textContent = "‚ùå ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ÿÆÿßÿ∑ÿ¶ÿ©";
        feedback.classList.add("incorrect");
      }

      block.appendChild(feedback);
      block.querySelector(".show-solution").style.display = "inline-block";
    };

    block.querySelector(".reset").onclick = () => {
      selectedAnswers.clear();
      block.querySelectorAll(".answer").forEach(a => a.classList.remove("selected","correct","incorrect"));
      block.querySelectorAll(".feedback").forEach(f => f.remove());
      block.querySelector(".show-solution").style.display = "none";
    };

    block.querySelector(".show-solution").onclick = () => {
      answersDivs.forEach(ans => {
        if (correctAnswers.includes(ans.textContent)) ans.classList.add("correct");
        else ans.classList.add("incorrect");
      });
    };

    container.appendChild(block);
  });

  function goBack() {
    window.location.href = "lesson.html";
  }
</script>
<script src="./layout-fix.js"></script>

</body>
</html>
