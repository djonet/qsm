<!DOCTYPE html>
<html lang="fr">
<head>
<!-- üîí ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿµŸÅÿ≠ÿ© ÿ®ŸÄ Firebase -->
<script type="module">
  import { initializeApp, getApps } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBldr32JPJGdMyZZBT1PD2eHvE48QkVtU8",
    authDomain: "qcm-djo.firebaseapp.com",
    projectId: "qcm-djo",
    storageBucket: "qcm-djo.firebasestorage.app",
    messagingSenderId: "384943172069",
    appId: "1:384943172069:web:6b59c1b9b31f2fe097a70c",
    measurementId: "G-13MC1GT4HM"
  };

  document.documentElement.style.visibility = 'hidden';

  const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db   = getFirestore(app);

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.replace('index.html');
      return;
    }
    try {
      const ref  = doc(db, 'allowedUsers', user.uid);
      const snap = await getDoc(ref);

      if (snap.exists()) {
        document.documentElement.style.visibility = 'visible';
      } else {
        window.location.replace('welcome.html?status=pending');
      }
    } catch (e) {
      console.error('Firebase Auth Error:', e);
      window.location.replace('welcome.html?status=pending');
    }
  });
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anatomie Humaine - Qcms BY DJO</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
  body {
    font-family: 'Cairo', sans-serif;
    direction: rtl;
    background: radial-gradient(circle at top,#d9faff,#aee4f5,#7fd4e8);
    margin: 0; padding: 20px; color: white;
  }
  .container {
    background: rgba(0,0,0,0.55);
    padding: 25px;
    border-radius: 20px;
    backdrop-filter: blur(15px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.7);
    max-width: 900px;
    margin: auto;
    text-align: center;
  }
  h2,h3 { margin-bottom: 10px; }

  .question-block {
    background: rgba(30,30,30,0.85);
    border-radius: 12px;
    margin: 20px 0;
    padding: 20px;
    text-align: right;
    transition: transform 0.3s;
  }
  .question-block:hover { transform: scale(1.02); }

  @keyframes starFade {
    0% { transform: scale(0); opacity: 0; }
    60% { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }
  .difficulty { margin-bottom: 8px; text-align: left; }
  .star {
    font-size: 22px;
    display: inline-block;
    color: gold;
    opacity: 0;
    animation: starFade 0.5s forwards;
  }
  .star:nth-child(1){animation-delay:0.1s;}
  .star:nth-child(2){animation-delay:0.2s;}
  .star:nth-child(3){animation-delay:0.3s;}
  .star:nth-child(4){animation-delay:0.4s;}
  .star:nth-child(5){animation-delay:0.5s;}

  .question-text { font-weight: bold; margin-bottom: 15px; font-size: 18px; }
  .answers { display: grid; gap: 10px; }
  .answer {
    background: rgba(255,255,255,0.12);
    padding: 14px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.25s ease;
    border: 1px solid transparent;
    color: white;
    user-select: none;
  }
  .answer:hover { background: rgba(255,255,255,0.25); transform: scale(1.02); }
  .answer.selected {
    background: linear-gradient(135deg,#0096c7,#00b4d8);
    color: black;
    border: 1px solid #48cae4;
    box-shadow: 0 0 12px rgba(72,202,228,0.7);
    transform: scale(1.04);
  }
  .correct {
    background: linear-gradient(135deg,#00e676,#00c853)!important;
    color: black!important;
  }
  .incorrect {
    background: linear-gradient(135deg,#ef5350,#c62828)!important;
    color: black!important;
  }
  .feedback {
    margin-top: 10px;
    padding: 10px;
    border-radius: 10px;
    text-align: center;
    font-weight: bold;
    color: black;
    animation: pulse 1s ease;
  }
  @keyframes pulse {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  .feedback.correct { background: rgba(0,200,0,0.3); }
  .feedback.incorrect { background: rgba(200,0,0,0.3); }

  .control-buttons {
    display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;
  }
  .control-buttons button {
    flex: 1; min-width: 100px; padding: 10px;
    border: none; border-radius: 10px;
    background: linear-gradient(135deg,#00b4d8,#48cae4);
    color: white; font-weight: bold;
    cursor: pointer; transition: 0.3s;
  }
  .control-buttons button:hover { transform: scale(1.05); }

  @media(max-width:600px){
    body{padding:10px;}
    .container{width:95%;padding:15px;}
    .question-text{font-size:16px;}
    .answer{font-size:15px;padding:10px;}
    .control-buttons{flex-direction:column;}
  }
</style>
</head>

<body>
<div class="container">
  <h3 id="lessonTitle"></h3>
  <div id="questionsContainer"></div>
  <button class="control-buttons" style="background:#444;margin-top:20px" onclick="goBack()">üîô ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿØÿ±Ÿàÿ≥</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
  // üß© ÿ•ÿπÿØÿßÿØ ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
  localStorage.setItem('specialty','ÿ∑ÿ® ÿßŸÑÿ£ÿ≥ŸÜÿßŸÜ');
  localStorage.setItem('level','ÿ≥ŸÜÿ© 2');
  localStorage.setItem('subject','Anatomie humaine');

  const lesson = localStorage.getItem('lesson') || 'Os frontal et √©thmo√Øde';
  document.getElementById('lessonTitle').textContent = `ÿßŸÑÿØÿ±ÿ≥: ${lesson}`;

  // üß† ÿ£ÿ≥ÿ¶ŸÑÿ© ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©
  const questionsData = {
   
  "Les mat√©riaux √† empreinte": [
    // 1‚Äì8 : difficult√© 1
    {
      question: "L‚Äôempreinte en dentisterie est d√©finie comme un moulage en n√©gatif d‚Äôune partie ou de la totalit√© des arcades et tissus environnants, destin√© √† obtenir un mod√®le positif fid√®le.",
      difficulty: 1,
      answers: [
        { text: "Elle ne concerne pas les tissus environnants", correct: false },
        { text: "Elle permet d‚Äôobtenir la r√©plique des structures enregistr√©es", correct: true },
        { text: "Elle est un moulage positif pris directement en bouche", correct: false },
        { text: "Oui, c‚Äôest la d√©finition clinique donn√©e dans le cours", correct: true }
      ]
    },
    {
      question: "Selon l‚Äôintroduction, la CFAO progresse mais l‚Äôempreinte ¬´ chimico-manuelle ¬ª reste d‚Äôactualit√© et s‚Äôest am√©lior√©e pour la pr√©cision dimensionnelle.",
      difficulty: 1,
      answers: [
        { text: "La CFAO exclut tout int√©r√™t pour les mat√©riaux d‚Äôempreinte", correct: false },
        { text: "Les propri√©t√©s m√©caniques/surfaciques des mat√©riaux se sont am√©lior√©es", correct: true },
        { text: "L‚Äôempreinte traditionnelle est pr√©sent√©e comme obsol√®te", correct: false },
        { text: "Le texte souligne que la CFAO a fait des efforts mais n‚Äôa pas remplac√© l‚Äôempreinte traditionnelle", correct: true }
      ]
    },
    {
      question: "Pour O‚ÄôBrien, deux grandes classes de mat√©riaux √† empreinte se distinguent apr√®s leur r√©action : √©lastiques et in√©lastiques (rigides).",
      difficulty: 1,
      answers: [
        { text: "Le cours ne mentionne qu‚Äôune seule classe", correct: false },
        { text: "Les √©lastiques et les in√©lastiques/rigides", correct: true },
        { text: "Les rigides sont dits ¬´ hydrocollo√Ødes ¬ª dans le texte", correct: false },
        { text: "La distinction est bas√©e sur le comportement apr√®s la prise", correct: true }
      ]
    },
    {
      question: "Les hydrocollo√Ødes sont class√©s en irr√©versibles (alginate) et r√©versibles (agar-agar).",
      difficulty: 1,
      answers: [
        { text: "Oui, c‚Äôest l‚Äôopposition cit√©e", correct: true },
        { text: "Les deux sont explicitement d√©crits comme r√©versibles", correct: false },
        { text: "L‚Äôagar-agar est donn√© comme irr√©versible", correct: false },
        { text: "L‚Äôalginate est l‚Äôirr√©versible et l‚Äôagar-agar le r√©versible", correct: true }
      ]
    },
    {
      question: "Parmi les √©lastom√®res cit√©s figurent les polysulfures, silicones et poly√©thers.",
      difficulty: 1,
      answers: [
        { text: "Elles appartiennent √† la classe ¬´ √©lastiques ¬ª", correct: true },
        { text: "Ces trois familles sont list√©es dans le document", correct: true },
        { text: "Elles sont d√©crites comme hydrocollo√Ødes", correct: false },
        { text: "Elles sont class√©es parmi les mat√©riaux rigides", correct: false }
      ]
    },
    {
      question: "Les mat√©riaux in√©lastiques/rigides regroupent notamment les cires/compositions thermoplastiques, les p√¢tes oxyde de zinc-eug√©nol et le pl√¢tre.",
      difficulty: 1,
      answers: [
        { text: "Ils sont rang√©s parmi les √©lastom√®res", correct: false },
        { text: "Ces trois sous-groupes sont explicitement cit√©s", correct: true },
        { text: "Ils sont pr√©sent√©s comme hydrophiles par d√©finition", correct: false },
        { text: "Ils rel√®vent des mat√©riaux in√©lastiques", correct: true }
      ]
    },
    {
      question: "Parmi les souhaits g√©n√©raux des mat√©riaux √©lastiques : odeur/go√ªt agr√©ables et innocuit√© (non toxiques, non irritants).",
      difficulty: 1,
      answers: [
        { text: "Ces qualit√©s sensorielles et biologiques sont mentionn√©es", correct: true },
        { text: "Le cours exige un go√ªt neutre mais accepte la toxicit√©", correct: false },
        { text: "Une l√©g√®re irritabilit√© est recommand√©e", correct: false },
        { text: "L‚Äôinnocuit√© est cit√©e comme exigence", correct: true }
      ]
    },
    {
      question: "Le temps de travail souhait√© pour un mat√©riau √©lastique est d‚Äôau moins 3 minutes.",
      difficulty: 1,
      answers: [
        { text: "Cette valeur minimale est donn√©e", correct: true },
        { text: "Elle fait partie des propri√©t√©s g√©n√©rales attendues", correct: true },
        { text: "Il n‚Äôy a aucune indication de dur√©e dans le texte", correct: false },
        { text: "Le temps requis est strictement inf√©rieur √† 1 minute", correct: false }
      ]
    },

    // 9‚Äì16 : difficult√© 2
    {
      question: "La r√©action de prise recherch√©e est dite ¬´ athermique ¬ª. ",
      difficulty: 2,
      answers: [
        { text: "Elle figure parmi les propri√©t√©s g√©n√©rales", correct: true },
        { text: "La prise doit obligatoirement √™tre thermique", correct: false },
        { text: "L‚Äôathermicit√© est mentionn√©e comme souhaitable", correct: true },
        { text: "Le document n‚Äôemploie pas ce terme", correct: false }
      ]
    },
    {
      question: "Une stabilit√© dimensionnelle d‚Äôau moins 24 heures (conditions d‚Äôhygrom√©trie/thermie normales) est souhait√©e pour les mat√©riaux √©lastiques.",
      difficulty: 2,
      answers: [
        { text: "Les conditions environnementales ¬´ cabinet/labo ¬ª sont pr√©cis√©es", correct: true },
        { text: "La stabilit√© n‚Äôest pas consid√©r√©e", correct: false },
        { text: "Le texte recommande une stabilit√© de 24 jours", correct: false },
        { text: "Cette dur√©e minimale est explicitement donn√©e", correct: true }
      ]
    },
    {
      question: "Le mat√©riau doit √™tre compatible avec le mat√©riau de r√©plique et ne pas d√©gager de gaz de r√©action.",
      difficulty: 2,
      answers: [
        { text: "Le d√©gagement gazeux est recherch√© pour l‚Äôadh√©sion", correct: false },
        { text: "L‚Äôincompatibilit√© avec les r√©pliques est tol√©r√©e", correct: false },
        { text: "¬´ Sans d√©gagement gazeux ¬ª est cit√©", correct: true },
        { text: "Compatibilit√© avec le mat√©riau de r√©plique exig√©e", correct: true }
      ]
    },
    {
      question: "Le conditionnement ergonomique et un prix en accord avec le r√©sultat souhait√© font partie des crit√®res.",
      difficulty: 2,
      answers: [
        { text: "L‚Äôergonomie n‚Äôest jamais √©voqu√©e", correct: false },
        { text: "Ils compl√®tent les exigences techniques", correct: true },
        { text: "Oui, ces points pratiques/√©conomiques sont list√©s", correct: true },
        { text: "Le texte rejette toute consid√©ration de co√ªt", correct: false }
      ]
    },
    {
      question: "La pr√©cision rassemble la capacit√© √† reproduire formes (volumique/dimensionnelle) et microsurfaces (fid√©lit√© des d√©tails).",
      difficulty: 2,
      answers: [
        { text: "Les microsurfaces ne sont pas √©voqu√©es", correct: false },
        { text: "La pr√©cision ne concerne que le volume", correct: false },
        { text: "La ¬´ fid√©lit√© ¬ª nomme la reproduction fine des d√©tails", correct: true },
        { text: "Ces deux volets sont distingu√©s", correct: true }
      ]
    },
    {
      question: "La mouillabilit√© exprime l‚Äôaptitude d‚Äôun fluide √† s‚Äô√©taler √† la surface d‚Äôun solide et conditionne l‚Äôenregistrement des surfaces.",
      difficulty: 2,
      answers: [
        { text: "Elle n‚Äôa aucune cons√©quence clinique", correct: false },
        { text: "Une faible mouillabilit√© r√©duit l‚Äôaptitude √† l‚Äô√©talement", correct: true },
        { text: "La mouillabilit√© est ind√©pendante de l‚Äô√©talement", correct: false },
        { text: "La d√©finition et l‚Äôimpact clinique sont donn√©s", correct: true }
      ]
    },
    {
      question: "D‚Äôune mani√®re g√©n√©rale, mouillabilit√© d√©pend de viscosit√©, thixotropie et hydrophilie.",
      difficulty: 2,
      answers: [
        { text: "Ils conditionnent l‚Äôaptitude √† l‚Äô√©talement", correct: true },
        { text: "Seule l‚Äôhydrophilie est mentionn√©e", correct: false },
        { text: "La thixotropie n‚Äôappara√Æt pas", correct: false },
        { text: "Ces trois facteurs sont cit√©s", correct: true }
      ]
    },
    {
      question: "L‚Äôhydrophilie est li√©e √† l‚Äôangle de contact eau/mat√©riau : < 90¬∞ ‚áí hydrophile.",
      difficulty: 2,
      answers: [
        { text: "Un angle > 90¬∞ signe l‚Äôhydrophilie", correct: false },
        { text: "Cette relation est explicitement formul√©e", correct: true },
        { text: "Le seuil de 90¬∞ est donn√©", correct: true },
        { text: "L‚Äôangle de contact n‚Äôest pas utilis√©", correct: false }
      ]
    },

    // 17‚Äì24 : difficult√© 3
    {
      question: "La viscosit√© est la r√©sistance √† l‚Äô√©coulement, li√©e aux interactions intermol√©culaires et au taux de charges.",
      difficulty: 3,
      answers: [
        { text: "Le taux de charges influence la viscosit√©", correct: true },
        { text: "Le texte ne parle pas de charges", correct: false },
        { text: "D√©finition et d√©terminants sont cit√©s", correct: true },
        { text: "Elle ne d√©pend pas des interactions mol√©culaires", correct: false }
      ]
    },
    {
      question: "La viscosit√© n‚Äôagit pas directement sur le mouillage, mais influence la cin√©tique d‚Äô√©coulement et le degr√© de compression tissulaire √† l‚Äôempreinte.",
      difficulty: 3,
      answers: [
        { text: "Cette nuance est √©crite dans le cours", correct: true },
        { text: "Elle n‚Äôa aucun effet sur la proc√©dure clinique", correct: false },
        { text: "Elle d√©termine directement l‚Äôhydrophilie", correct: false },
        { text: "Elle conditionne aussi malaxage, injectabilit√© et aptitude √† l‚Äô√©coulement", correct: true }
      ]
    },
    {
      question: "La reproduction des d√©tails est optimis√©e par mouillabilit√©, faible viscosit√© et compatibilit√© avec le mat√©riau de r√©plique.",
      difficulty: 3,
      answers: [
        { text: "La compatibilit√© n‚Äôest pas pertinente", correct: false },
        { text: "Elle ne d√©pend pas de la viscosit√©", correct: false },
        { text: "Elle se mesure en microns dans le texte", correct: true },
        { text: "Ces trois facteurs sont list√©s", correct: true }
      ]
    },
    {
      question: "La stabilit√© dimensionnelle est affect√©e par dilatation thermique, contraction de prise et √©limination de sous-produits volatils.",
      difficulty: 3,
      answers: [
        { text: "Le temps de stockage est sans effet", correct: false },
        { text: "Le stockage/l‚Äôenvironnement influencent la stabilit√©", correct: true },
        { text: "La stabilit√© n‚Äôest qu‚Äôun param√®tre ¬´ imm√©diat ¬ª", correct: false },
        { text: "Ces facteurs sont cit√©s", correct: true }
      ]
    },
    {
      question: "Les propri√©t√©s √©lastiques d√©pendent du taux de r√©ticulation, de la quantit√© de charges et de plastifiants.",
      difficulty: 3,
      answers: [
        { text: "Elles d√©pendent uniquement de la temp√©rature buccale", correct: false },
        { text: "Les plastifiants ne sont jamais mentionn√©s", correct: false },
        { text: "Ces d√©pendances sont list√©es", correct: true },
        { text: "Elles conditionnent la r√©sistance aux contraintes", correct: true }
      ]
    },
    {
      question: "Un retrait pr√©matur√© avant fin de prise est une cause fr√©quente de d√©formation.",
      difficulty: 3,
      answers: [
        { text: "Le retrait pr√©coce am√©liore la pr√©cision", correct: false },
        { text: "Le texte l‚Äôindique explicitement", correct: true },
        { text: "Le m√©lange homog√®ne n‚Äôest pas n√©cessaire", correct: false },
        { text: "Le respect d‚Äôun temps de prise suffisant est requis", correct: true }
      ]
    },
    {
      question: "Il n‚Äôexiste pas de protocole standard de d√©sinfection en raison de la diversit√© des mat√©riaux et d√©sinfectants.",
      difficulty: 3,
      answers: [
        { text: "Cette absence de standard est √©crite", correct: true },
        { text: "Un protocole unique est impos√©", correct: false },
        { text: "L‚Äôimmersion est recommand√©e pour une bonne d√©sinfection", correct: true },
        { text: "La pulv√©risation est dite syst√©matiquement sup√©rieure", correct: false }
      ]
    },
    {
      question: "L‚Äôimmersion est recommand√©e pour tous les mat√©riaux sauf les hydrocollo√Ødes, avec un temps suffisant mais < 1 h.",
      difficulty: 3,
      answers: [
        { text: "Le temps d‚Äôimmersion n‚Äôa pas d‚Äôimpact dimensionnel", correct: false },
        { text: "Une longue immersion modifie les dimensions", correct: true },
        { text: "Cette restriction et la limite de temps sont donn√©es", correct: true },
        { text: "Les hydrocollo√Ødes supportent des immersions prolong√©es", correct: false }
      ]
    },

    // 25‚Äì35 : difficult√© 4
    {
      question: "Les mat√©riaux d‚Äôorigine naturelle (pl√¢tre, hydrocollo√Ødes) ne pr√©sentent pas de toxicit√© ; la biocompatibilit√© des synth√©tiques est li√©e √† leur instabilit√© chimique.",
      difficulty: 4,
      answers: [
        { text: "Oui, c‚Äôest le passage sur toxicit√©/biocompatibilit√©", correct: true },
        { text: "Le pl√¢tre est d√©crit comme toxique", correct: false },
        { text: "Les synth√©tiques sont dits toujours stables chimiquement", correct: false },
        { text: "L‚Äô√©nonc√© oppose naturel/synth√©tique comme dans le texte", correct: true }
      ]
    },
    {
      question: "L‚Äôempreinte pr√©side √† l‚Äô√©laboration de la construction proth√©tique et le choix du mat√©riau est une √©tape fondamentale.",
      difficulty: 4,
      answers: [
        { text: "Le mod√®le n‚Äôa pas √† √™tre fid√®le", correct: false },
        { text: "La s√©lection du mat√©riau n‚Äôest pas consid√©r√©e essentielle", correct: false },
        { text: "La fid√©lit√© du mod√®le de travail refl√®te la capacit√© d‚Äôenregistrement", correct: true },
        { text: "Ces id√©es sont formul√©es dans l‚Äôintroduction", correct: true }
      ]
    },
    {
      question: "L‚Äôam√©lioration des propri√©t√©s m√©caniques et surfaciques sert la pr√©cision dimensionnelle et la d√©finition des √©tats de surface.",
      difficulty: 4,
      answers: [
        { text: "Elle n‚Äôa aucun rapport avec la pr√©cision", correct: false },
        { text: "Elle concerne les mat√©riaux d‚Äôempreinte actuels", correct: true },
        { text: "Elle est attribu√©e uniquement aux hydrocollo√Ødes", correct: false },
        { text: "Cette double finalit√© est mentionn√©e", correct: true }
      ]
    },
    {
      question: "La ¬´ pr√©cision ¬ª au sens du cours inclut pr√©cision volumique/dimensionnelle et ¬´ fid√©lit√© ¬ª des microsurfaces.",
      difficulty: 4,
      answers: [
        { text: "Cette articulation est soulign√©e", correct: true },
        { text: "La pr√©cision ne vise que les contours macroscopiques", correct: false },
        { text: "La fid√©lit√© est la reproduction des d√©tails", correct: true },
        { text: "Les microsurfaces ne sont pas prises en compte", correct: false }
      ]
    },
    {
      question: "La mouillabilit√© insuffisante r√©duit l‚Äô√©talement et l‚Äôenregistrement des surfaces bucco-dentaires.",
      difficulty: 4,
      answers: [
        { text: "Cons√©quence clinique directe sur l‚Äôempreinte", correct: true },
        { text: "Aucune incidence n‚Äôest rapport√©e", correct: false },
        { text: "Relation causale clairement indiqu√©e", correct: true },
        { text: "Elle am√©liore paradoxalement l‚Äôenregistrement", correct: false }
      ]
    },
    {
      question: "La stabilit√© dimensionnelle est un param√®tre ¬´ √† plus long terme ¬ª, distinct de la pr√©cision imm√©diate.",
      difficulty: 4,
      answers: [
        { text: "La stabilit√© mesure la conformit√© √† la situation originelle", correct: true },
        { text: "Elle n‚Äôa pas de lien avec l‚Äôenvironnement de stockage", correct: false },
        { text: "Elle est qualifi√©e d‚Äô¬´ imm√©diate ¬ª dans le texte", correct: false },
        { text: "Cette distinction temporelle est donn√©e", correct: true }
      ]
    },
    {
      question: "Les propri√©t√©s m√©caniques peuvent conduire √† des d√©formations lors du retrait de la bouche ou de la coul√©e si insuffisantes.",
      difficulty: 4,
      answers: [
        { text: "D‚Äôo√π l‚Äôimportance d‚Äôun m√©lange homog√®ne et du temps de prise", correct: true },
        { text: "Le retrait pr√©matur√© est encourag√©", correct: false },
        { text: "Les d√©formations ne surviennent qu‚Äôen laboratoire", correct: false },
        { text: "Ces sources de contraintes sont cit√©es", correct: true }
      ]
    },
    {
      question: "L‚Äôangle de contact < 90¬∞ est le crit√®re d‚Äôhydrophilie et favorise l‚Äô√©talement.",
      difficulty: 4,
      answers: [
        { text: "Un angle inf√©rieur r√©duit la mouillabilit√©", correct: false },
        { text: "Le texte ne mentionne pas l‚Äôangle de contact", correct: false },
        { text: "L‚Äôhydrophilie soutient la mouillabilit√©", correct: true },
        { text: "Le seuil et son interpr√©tation sont donn√©s", correct: true }
      ]
    },
    {
      question: "La reproduction des d√©tails en microns d√©pend aussi de la compatibilit√© avec le mat√©riau de r√©plique.",
      difficulty: 4,
      answers: [
        { text: "Le texte ne parle pas de microns", correct: false },
        { text: "La mesure en microns est indiqu√©e", correct: true },
        { text: "La compatibilit√© est explicitement incluse", correct: true },
        { text: "Elle est ind√©pendante de tout mat√©riau de r√©plique", correct: false }
      ]
    },
    {
      question: "L‚Äôenvironnement/temps de stockage peuvent alt√©rer les propri√©t√©s des empreintes.",
      difficulty: 4,
      answers: [
        { text: "D‚Äôo√π l‚Äôimportance des conditions de conservation", correct: true },
        { text: "La stabilit√© augmente toujours avec le temps", correct: false },
        { text: "Ce risque est mentionn√©", correct: true },
        { text: "Le stockage n‚Äôa pas d‚Äôeffet selon le document", correct: false }
      ]
    },
    {
      question: "L‚Äôimmersion est pr√©f√©r√©e √† la pulv√©risation pour la d√©sinfection, mais doit rester contr√¥l√©e (temps < 1 h).",
      difficulty: 4,
      answers: [
        { text: "Limitation temporelle pr√©cis√©e", correct: true },
        { text: "Sup√©riorit√© de l‚Äôimmersion indiqu√©e", correct: true },
        { text: "La pulv√©risation est dite √©quivalente en toutes circonstances", correct: false },
        { text: "Aucune pr√©caution de temps n‚Äôest donn√©e", correct: false }
      ]
    },

    // 36‚Äì40 : difficult√© 5 (Tr√®s difficiles)
    {
      question: "La cin√©tique d‚Äô√©coulement, d√©termin√©e par la viscosit√©, conditionne des facteurs op√©ratoires (malaxage, injection, aptitude √† l‚Äô√©coulement).",
      difficulty: 5,
      answers: [
        { text: "Ces trois implications op√©ratoires sont list√©es", correct: true },
        { text: "Elles ne sont pas mentionn√©es", correct: false },
        { text: "Elles sont reli√©es √† la viscosit√© dans le texte", correct: true },
        { text: "Elles d√©pendent uniquement de l‚Äôhydrophilie", correct: false }
      ]
    },
    {
      question: "La pr√©cision dimensionnelle imm√©diate peut √™tre respect√©e alors que la stabilit√© dimensionnelle se d√©grade avec un stockage inappropri√©.",
      difficulty: 5,
      answers: [
        { text: "Le texte insiste sur le r√¥le du temps et de l‚Äôenvironnement", correct: true },
        { text: "Les deux param√®tres sont confondus sans distinction", correct: false },
        { text: "Le stockage am√©liore toujours la stabilit√©", correct: false },
        { text: "Cette opposition ¬´ imm√©diat/long terme ¬ª est pos√©e", correct: true }
      ]
    },
    {
      question: "Les propri√©t√©s √©lastiques d√©pendent conjointement r√©ticulation/charges/plastifiants, modulant la r√©sistance aux contraintes de coul√©e.",
      difficulty: 5,
      answers: [
        { text: "Les trois param√®tres sont nomm√©s", correct: true },
        { text: "Seule la r√©ticulation est √©voqu√©e", correct: false },
        { text: "La coul√©e fait partie des contraintes cit√©es", correct: true },
        { text: "Les plastifiants sont exclus du raisonnement", correct: false }
      ]
    },
    {
      question: "Le document assimile ¬´ fid√©lit√© ¬ª √† la capacit√© de reproduction des microsurfaces, distincte de la pr√©cision volumique.",
      difficulty: 5,
      answers: [
        { text: "Le texte ne d√©finit pas ce terme", correct: false },
        { text: "¬´ Fid√©lit√© ¬ª est utilis√©e pour la dilatation thermique", correct: false },
        { text: "Il appartient √† la d√©finition op√©rationnelle de la pr√©cision", correct: true },
        { text: "Oui, ce vocabulaire est explicitement utilis√©", correct: true }
      ]
    },
    {
      question: "La conclusion insiste : le succ√®s d√©pend du choix du mat√©riau/technique et d‚Äôun examen clinique rigoureux ; l‚Äôoptimisation actuelle vient surtout de l‚Äôam√©lioration des mat√©riaux.",
      difficulty: 5,
      answers: [
        { text: "L‚Äôexamen clinique est jug√© secondaire", correct: false },
        { text: "La technique seule suffit, ind√©pendamment du mat√©riau", correct: false },
        { text: "Ces deux messages sont √©nonc√©s", correct: true },
        { text: "La primaut√© de l‚Äôam√©lioration des propri√©t√©s est soulign√©e", correct: true }
      ]
    }
  ]
};



  const questions = questionsData[lesson] || [];
  const container = document.getElementById("questionsContainer");

  questions.forEach((q) => {
    const block = document.createElement("div");
    block.className = "question-block";
    const selectedAnswers = new Set();
    const correctAnswers = q.answers.filter(a => a.correct).map(a => a.text);

    let starsHTML = "";
    for (let s = 1; s <= 5; s++) {
      starsHTML += `<span class="star" style="color:${s <= q.difficulty ? 'gold' : 'rgba(255,255,255,0.2)'};">‚òÖ</span>`;
    }

    block.innerHTML = `
      <div class="difficulty">${starsHTML}</div>
      <div class="question-text">${q.question}</div>
      <div class="answers">
        ${q.answers.map(a => `<div class="answer">${a.text}</div>`).join("")}
      </div>
      <div class="control-buttons">
        <button class="submit">‚úÖ Ÿáÿ∞Ÿá ŸáŸä ÿ•ÿ¨ÿßÿ®ÿ™Ÿä</button>
        <button class="reset">üîÅ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©</button>
        <button class="show-solution" style="display:none;">üí° ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©</button>
      </div>
    `;

    const answersDivs = block.querySelectorAll(".answer");
    answersDivs.forEach(ans => {
      ans.onclick = () => {
        ans.classList.toggle("selected");
        const text = ans.textContent;
        if (selectedAnswers.has(text)) selectedAnswers.delete(text);
        else selectedAnswers.add(text);
      };
    });

    block.querySelector(".submit").onclick = () => {
      const selected = Array.from(selectedAnswers);
      block.querySelectorAll(".feedback").forEach(fb => fb.remove());
      const feedback = document.createElement("div");
      feedback.className = "feedback";

      if (selected.length === 0) {
        feedback.textContent = "‚ùó ŸÑŸÖ ÿ™ÿÆÿ™ÿ± ÿ£Ÿä ÿ•ÿ¨ÿßÿ®ÿ©";
        feedback.classList.add("incorrect");
      } else if (selected.length === correctAnswers.length && selected.every(t => correctAnswers.includes(t))) {
        feedback.textContent = "‚úÖ ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ÿµÿ≠Ÿäÿ≠ÿ©!";
        feedback.classList.add("correct");
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      } else {
        feedback.textContent = "‚ùå ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ÿÆÿßÿ∑ÿ¶ÿ©";
        feedback.classList.add("incorrect");
      }

      block.appendChild(feedback);
      block.querySelector(".show-solution").style.display = "inline-block";
    };

    block.querySelector(".reset").onclick = () => {
      selectedAnswers.clear();
      block.querySelectorAll(".answer").forEach(a => a.classList.remove("selected","correct","incorrect"));
      block.querySelectorAll(".feedback").forEach(f => f.remove());
      block.querySelector(".show-solution").style.display = "none";
    };

    block.querySelector(".show-solution").onclick = () => {
      answersDivs.forEach(ans => {
        if (correctAnswers.includes(ans.textContent)) ans.classList.add("correct");
        else ans.classList.add("incorrect");
      });
    };

    container.appendChild(block);
  });

  function goBack() {
    window.location.href = "lesson.html";
  }
</script>
<script src="./layout-fix.js"></script>

</body>
</html>
