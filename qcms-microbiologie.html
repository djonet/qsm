<!DOCTYPE html>
<html lang="fr">

<head>
<!-- üîí ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿµŸÅÿ≠ÿ© ÿ®ŸÄ Firebase -->
<script type="module">
  import { initializeApp, getApps } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBldr32JPJGdMyZZBT1PD2eHvE48QkVtU8",
    authDomain: "qcm-djo.firebaseapp.com",
    projectId: "qcm-djo",
    storageBucket: "qcm-djo.firebasestorage.app",
    messagingSenderId: "384943172069",
    appId: "1:384943172069:web:6b59c1b9b31f2fe097a70c",
    measurementId: "G-13MC1GT4HM"
  };

  document.documentElement.style.visibility = 'hidden';

  const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db   = getFirestore(app);

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.replace('index.html');
      return;
    }
    try {
      const ref  = doc(db, 'allowedUsers', user.uid);
      const snap = await getDoc(ref);

      if (snap.exists()) {
        document.documentElement.style.visibility = 'visible';
      } else {
        window.location.replace('welcome.html?status=pending');
      }
    } catch (e) {
      console.error('Firebase Auth Error:', e);
      window.location.replace('welcome.html?status=pending');
    }
  });
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anatomie Humaine - Qcms BY DJO</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
  body {
    font-family: 'Cairo', sans-serif;
    direction: rtl;
    background: radial-gradient(circle at top,#d9faff,#aee4f5,#7fd4e8);
    margin: 0; padding: 20px; color: white;
  }
  .container {
    background: rgba(0,0,0,0.55);
    padding: 25px;
    border-radius: 20px;
    backdrop-filter: blur(15px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.7);
    max-width: 900px;
    margin: auto;
    text-align: center;
  }
  h2,h3 { margin-bottom: 10px; }

  .question-block {
    background: rgba(30,30,30,0.85);
    border-radius: 12px;
    margin: 20px 0;
    padding: 20px;
    text-align: right;
    transition: transform 0.3s;
  }
  .question-block:hover { transform: scale(1.02); }

  @keyframes starFade {
    0% { transform: scale(0); opacity: 0; }
    60% { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }
  .difficulty { margin-bottom: 8px; text-align: left; }
  .star {
    font-size: 22px;
    display: inline-block;
    color: gold;
    opacity: 0;
    animation: starFade 0.5s forwards;
  }
  .star:nth-child(1){animation-delay:0.1s;}
  .star:nth-child(2){animation-delay:0.2s;}
  .star:nth-child(3){animation-delay:0.3s;}
  .star:nth-child(4){animation-delay:0.4s;}
  .star:nth-child(5){animation-delay:0.5s;}

  .question-text { font-weight: bold; margin-bottom: 15px; font-size: 18px; }
  .answers { display: grid; gap: 10px; }
  .answer {
    background: rgba(255,255,255,0.12);
    padding: 14px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.25s ease;
    border: 1px solid transparent;
    color: white;
    user-select: none;
  }
  .answer:hover { background: rgba(255,255,255,0.25); transform: scale(1.02); }
  .answer.selected {
    background: linear-gradient(135deg,#0096c7,#00b4d8);
    color: black;
    border: 1px solid #48cae4;
    box-shadow: 0 0 12px rgba(72,202,228,0.7);
    transform: scale(1.04);
  }
  .correct {
    background: linear-gradient(135deg,#00e676,#00c853)!important;
    color: black!important;
  }
  .incorrect {
    background: linear-gradient(135deg,#ef5350,#c62828)!important;
    color: black!important;
  }
  .feedback {
    margin-top: 10px;
    padding: 10px;
    border-radius: 10px;
    text-align: center;
    font-weight: bold;
    color: black;
    animation: pulse 1s ease;
  }
  @keyframes pulse {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  .feedback.correct { background: rgba(0,200,0,0.3); }
  .feedback.incorrect { background: rgba(200,0,0,0.3); }

  .control-buttons {
    display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;
  }
  .control-buttons button {
    flex: 1; min-width: 100px; padding: 10px;
    border: none; border-radius: 10px;
    background: linear-gradient(135deg,#00b4d8,#48cae4);
    color: white; font-weight: bold;
    cursor: pointer; transition: 0.3s;
  }
  .control-buttons button:hover { transform: scale(1.05); }

  @media(max-width:600px){
    body{padding:10px;}
    .container{width:95%;padding:15px;}
    .question-text{font-size:16px;}
    .answer{font-size:15px;padding:10px;}
    .control-buttons{flex-direction:column;}
  }
</style>
</head>

<body>
<div class="container">
  <h3 id="lessonTitle"></h3>
  <div id="questionsContainer"></div>
  <button class="control-buttons" style="background:#444;margin-top:20px" onclick="goBack()">üîô ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿØÿ±Ÿàÿ≥</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
  // üß© ÿ•ÿπÿØÿßÿØ ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
  localStorage.setItem('specialty','ÿ∑ÿ® ÿßŸÑÿ£ÿ≥ŸÜÿßŸÜ');
  localStorage.setItem('level','ÿ≥ŸÜÿ© 2');
  localStorage.setItem('subject','Anatomie humaine');

  const lesson = localStorage.getItem('lesson') || 'Os frontal et √©thmo√Øde';
  document.getElementById('lessonTitle').textContent = `ÿßŸÑÿØÿ±ÿ≥: ${lesson}`;

  // üß† ÿ£ÿ≥ÿ¶ŸÑÿ© ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©
  const questionsData = {
    'Physiologie bact√©rienne dentaire': [
  // A. Bon √©l√®ve ‚≠ê
  {
    question: "L‚Äôeau intracellulaire repr√©sente la majeure partie du poids bact√©rien ; elle assure solubilisation, transport et hydrolyse.",
    difficulty: 1,
    answers: [
      { text: "A. Minoritaire dans la cellule, r√©serve √©nerg√©tique", correct: false },
      { text: "B. Permet la solubilisation de nutriments et m√©tabolites", correct: true },
      { text: "C. Facilite leur transport vers les sites de r√©action", correct: true },
      { text: "D. Intervient dans des r√©actions d‚Äôhydrolyse", correct: true }
    ]
  },
  {
    question: "Cat√©gories selon source d‚Äô√©nergie et donneur d‚Äô√©lectrons.",
    difficulty: 1,
    answers: [
      { text: "A. Photolithotrophe", correct: true },
      { text: "B. Photo-organotrophe", correct: false },
      { text: "C. Chimiolithotrophe", correct: false },
      { text: "D. Chimio-organotrophe", correct: true }
    ]
  },
  {
    question: "Source de carbone : distinctions correctes.",
    difficulty: 1,
    answers: [
      { text: "A. Autotrophes : CO‚ÇÇ comme seule source de carbone", correct: true },
      { text: "B. H√©t√©rotrophes : substrats organiques comme source de carbone", correct: true },
      { text: "C. Autotrophes : substrats organiques", correct: false },
      { text: "D. H√©t√©rotrophes : CO‚ÇÇ uniquement", correct: false }
    ]
  },
  {
    question: "Sources d‚Äôazote directement assimilables.",
    difficulty: 1,
    answers: [
      { text: "A. Ammoniac/ions ammonium", correct: true },
      { text: "B. Nitrites et nitrates", correct: true },
      { text: "C. Azote gazeux N‚ÇÇ directement", correct: false },
      { text: "D. Groupements amines organiques", correct: true }
    ]
  },
  {
    question: "Facteurs de croissance exig√©s par certaines auxotrophes.",
    difficulty: 1,
    answers: [
      { text: "A. Bases puriques/pyrimidiques, acides gras, acides amin√©s", correct: true },
      { text: "B. Vitamines, h√®me et d√©riv√©s", correct: true },
      { text: "C. Glucose et CO‚ÇÇ comme facteurs obligatoires", correct: false },
      { text: "D. Divers compos√©s additionnels mentionn√©s (ex. h√®me)", correct: true }
    ]
  },

  // B. Tr√®s bon √©l√®ve ‚≠ê‚≠ê
  {
    question: "Colonies satellites autour d‚Äôun producteur de m√©tabolite : interpr√©tation.",
    difficulty: 2,
    answers: [
      { text: "A. Syntrophie sur milieu solide avec facteur diffusible", correct: true },
      { text: "B. Comp√©tition pour l‚Äôoxyg√®ne", correct: false },
      { text: "C. Croissance d‚Äôauxotrophes d√©pendantes d‚Äôun facteur lib√©r√©", correct: true },
      { text: "D. R√©serv√© aux bouillons d‚Äôenrichissement", correct: false }
    ]
  },
  {
    question: "Croissance exponentielle : conditions et param√®tres.",
    difficulty: 2,
    answers: [
      { text: "A. Fission binaire", correct: true },
      { text: "B. Taux de croissance propre √† l‚Äôorganisme", correct: true },
      { text: "C. Temp√©rature seule", correct: false },
      { text: "D. Composition du milieu et environnement", correct: true }
    ]
  },
  {
    question: "Phase de latence : caract√©ristiques.",
    difficulty: 2,
    answers: [
      { text: "A. Absence de croissance observable initiale", correct: true },
      { text: "B. Synth√®se d‚Äôenzymes et d‚Äô√©quipements cellulaires", correct: true },
      { text: "C. Mort massive des cellules", correct: false },
      { text: "D. Adaptation avant divisions actives", correct: true }
    ]
  },
  {
    question: "Phase stationnaire d‚Äôune culture batch :",
    difficulty: 2,
    answers: [
      { text: "A. Courbe horizontale", correct: true },
      { text: "B. √âpuisement de nutriments / √©quilibre division-mort", correct: true },
      { text: "C. Nombre viable constant", correct: true },
      { text: "D. Augmentation illimit√©e", correct: false }
    ]
  },
  {
    question: "Phase de d√©clin :",
    difficulty: 2,
    answers: [
      { text: "A. Mort > divisions", correct: true },
      { text: "B. Carence + d√©chets", correct: true },
      { text: "C. Lyse ‚Üí baisse du trouble", correct: true },
      { text: "D. Multiplication maximale", correct: false }
    ]
  },
  {
    question: "M√©thodes de nombre total (vivantes+mortes).",
    difficulty: 2,
    answers: [
      { text: "A. Chambres de comptage", correct: true },
      { text: "B. Compteurs Coulter", correct: true },
      { text: "C. Colorations fluorescentes globales", correct: true },
      { text: "D. Num√©ration sur g√©lose", correct: false }
    ]
  },
  {
    question: "D√©nombrement des viables.",
    difficulty: 2,
    answers: [
      { text: "A. √âtalement en surface/profondeur", correct: true },
      { text: "B. Filtration sur membranes", correct: true },
      { text: "C. Turbidit√© seule", correct: false },
      { text: "D. Compteur Coulter", correct: false }
    ]
  },
  {
    question: "Estimation de la biomasse cellulaire.",
    difficulty: 2,
    answers: [
      { text: "A. Poids sec", correct: true },
      { text: "B. Turbidit√©", correct: true },
      { text: "C. Dosage d‚ÄôATP/prot√©ines/acides nucl√©iques", correct: true },
      { text: "D. CFU uniquement", correct: false }
    ]
  },
  {
    question: "Groupes selon la temp√©rature.",
    difficulty: 2,
    answers: [
      { text: "A. Psychrophiles ‚â§15¬∞C", correct: true },
      { text: "B. Psychrotrophes 0‚Äì35¬∞C", correct: true },
      { text: "C. M√©sophiles 20‚Äì45¬∞C", correct: true },
      { text: "D. Hyperthermophiles 80‚Äì113¬∞C", correct: true }
    ]
  },
  {
    question: "Cat√©gories selon le pH.",
    difficulty: 2,
    answers: [
      { text: "A. Acidophiles : pH 1‚Äì6", correct: true },
      { text: "B. Neutrophiles : pH 6,5‚Äì7,5", correct: true },
      { text: "C. Alcalophiles : pH 8,5‚Äì11,5", correct: true },
      { text: "D. Acidophiles : optimum 7", correct: false }
    ]
  },

  // C. Excellent ‚≠ê‚≠ê‚≠ê
  {
    question: "Pression et osmose :",
    difficulty: 3,
    answers: [
      { text: "A. Barophiles : pression > atmosph√®re", correct: true },
      { text: "B. Halophiles : besoin de NaCl √©lev√©", correct: true },
      { text: "C. Halotol√©rantes : large tol√©rance au sel", correct: true },
      { text: "D. Barotol√©rantes : optimum 20% O‚ÇÇ", correct: false }
    ]
  },
  {
    question: "Exigences en oxyg√®ne et exemples.",
    difficulty: 3,
    answers: [
      { text: "A. A√©robies obligatoires (Pseudomonas)", correct: true },
      { text: "B. Ana√©robies strictes (Clostridium)", correct: true },
      { text: "C. A√©ro-ana√©robies facultatives (E. coli)", correct: true },
      { text: "D. Microa√©rophiles (2‚Äì10% O‚ÇÇ)", correct: true }
    ]
  },
  {
    question: "Composition et r√¥le des milieux de culture.",
    difficulty: 3,
    answers: [
      { text: "A. En fonction du but", correct: true },
      { text: "B. Selon les besoins bact√©riens", correct: true },
      { text: "C. Eau distill√©e comme solvant", correct: true },
      { text: "D. Seulement s‚Äôil est synth√©tique", correct: false }
    ]
  },
  {
    question: "Consistance des milieux :",
    difficulty: 3,
    answers: [
      { text: "A. Milieux liquides : bouillons", correct: true },
      { text: "B. Milieux solides : colonies isol√©es", correct: true },
      { text: "C. G√©lose = agent solidifiant", correct: true },
      { text: "D. Bouillons au sang uniquement", correct: false }
    ]
  },
  {
    question: "Milieux naturels et exemples.",
    difficulty: 3,
    answers: [
      { text: "A. Constituants animaux/v√©g√©taux", correct: true },
      { text: "B. Mac√©rations/d√©coctions de tissus", correct: true },
      { text: "C. G√©lose nutritive, Trypticase-soja", correct: true },
      { text: "D. Milieu ur√©e-indole naturel", correct: false }
    ]
  },
  {
    question: "Milieux synth√©tiques et semi-synth√©tiques.",
    difficulty: 3,
    answers: [
      { text: "A. Synth√©tiques = corps purs d√©finis", correct: true },
      { text: "B. Semi-synth√©tiques = m√©lange pur/naturel", correct: true },
      { text: "C. Semi-synth√©tiques sans √©l√©ments naturels", correct: false },
      { text: "D. Synth√©tiques = d√©coctions", correct: false }
    ]
  },
  {
    question: "Classement selon l‚Äôutilisation et effets recherch√©s.",
    difficulty: 3,
    answers: [
      { text: "A. Isolement (g√©lose nutritive, sang)", correct: true },
      { text: "B. Enrichissement √©lectif (SFB)", correct: true },
      { text: "C. S√©lectifs (pH/osmolarit√©/agents)", correct: true },
      { text: "D. S√©lectifs : Hektoen, Chapman", correct: true }
    ]
  },
  {
    question: "Milieux d‚Äôidentification, conservation, transport.",
    difficulty: 3,
    answers: [
      { text: "A. Identification : caract√®res biochimiques", correct: true },
      { text: "B. Conservation : milieux pauvres", correct: true },
      { text: "C. Transport : bouillon TGV", correct: true },
      { text: "D. Conservation : g√©lose au sang", correct: false }
    ]
  },
  {
    question: "Applications de la croissance bact√©rienne.",
    difficulty: 3,
    answers: [
      { text: "A. Diagnostic : isolement/identification", correct: true },
      { text: "B. Antibioth√©rapie : mesure activit√©", correct: true },
      { text: "C. Industrie : toxines/antibiotiques/vitamines", correct: true },
      { text: "D. Contr√¥le : aliments/eaux", correct: true }
    ]
  },
  {
    question: "Courbe de culture batch.",
    difficulty: 3,
    answers: [
      { text: "A. Quatre phases", correct: true },
      { text: "B. Exponentielle : croissance max", correct: true },
      { text: "C. D√©clin : lyse ‚Üí turbidit√© ‚Üì", correct: true },
      { text: "D. Latence : croissance imm√©diate", correct: false }
    ]
  },

  // D. Difficiles ‚≠ê‚≠ê‚≠ê‚≠ê
  {
    question: "Croisement sources/cat√©gories.",
    difficulty: 4,
    answers: [
      { text: "A. Donneur min√©ral ‚Üí lithotrophe", correct: true },
      { text: "B. Donneur organique ‚Üí organotrophe", correct: true },
      { text: "C. Source √©nergie oxydation ‚Üí chimiotrophe", correct: true },
      { text: "D. Carbone organique ‚Üí autotrophe", correct: false }
    ]
  },
  {
    question: "√âl√©ments min√©raux : r√¥les.",
    difficulty: 4,
    answers: [
      { text: "A. Soufre ‚Üí acides amin√©s soufr√©s", correct: true },
      { text: "B. Phosphore ‚Üí acides nucl√©iques, ATP", correct: true },
      { text: "C. Na‚Å∫/K‚Å∫/Mg¬≤‚Å∫/Cl‚Åª ‚Üí √©quilibre cellulaire", correct: true },
      { text: "D. Fer/Ca¬≤‚Å∫ requis √† fortes concentrations", correct: false }
    ]
  },
  {
    question: "M√©sophiles : caract√©ristiques.",
    difficulty: 4,
    answers: [
      { text: "A. Optimum 20‚Äì45¬∞C", correct: true },
      { text: "B. Minimum 15‚Äì20¬∞C", correct: true },
      { text: "C. Max ‚â§45¬∞C", correct: true },
      { text: "D. Nombreux pathog√®nes humains", correct: true }
    ]
  },
  {
    question: "Psychrotrophes.",
    difficulty: 4,
    answers: [
      { text: "A. Vivent √† 0¬∞C", correct: true },
      { text: "B. Optimum 20‚Äì30¬∞C", correct: true },
      { text: "C. Max ‚âà35¬∞C", correct: true },
      { text: "D. Incapables √† 0¬∞C", correct: false }
    ]
  },
  {
    question: "Thermophiles et hyperthermophiles.",
    difficulty: 4,
    answers: [
      { text: "A. Thermophiles 45‚Äì65¬∞C", correct: true },
      { text: "B. Hyperthermophiles 80‚Äì113¬∞C", correct: true },
      { text: "C. Thermophiles 15¬∞C", correct: false },
      { text: "D. Hyperthermophiles 120¬∞C", correct: false }
    ]
  },
  {
    question: "M√©thodes : total vs viables.",
    difficulty: 4,
    answers: [
      { text: "A. H√©mocytom√®tre/Coulter/fluorescence = total", correct: true },
      { text: "B. √âtalement surface/profondeur = viable", correct: true },
      { text: "C. Membranes filtrantes = viable", correct: true },
      { text: "D. Turbidit√© seule = discrimination vivantes/mortes", correct: false }
    ]
  },
  {
    question: "Biomasse et variations du milieu.",
    difficulty: 4,
    answers: [
      { text: "A. pH, imp√©dance, redox", correct: true },
      { text: "B. Dosage ATP/prot√©ines/ADN", correct: true },
      { text: "C. Poids sec/turbidit√©", correct: true },
      { text: "D. CFU seul", correct: false }
    ]
  },
  {
    question: "Milieux s√©lectifs et effet s√©lectif.",
    difficulty: 4,
    answers: [
      { text: "A. Effet via pH/osmolarit√© ou agents", correct: true },
      { text: "B. Croissance de quelques esp√®ces", correct: true },
      { text: "C. Exemples : Chapman/Hektoen", correct: true },
      { text: "D. √âquivalents d‚Äôidentification", correct: false }
    ]
  },
  {
    question: "Milieux d‚Äôisolement : sous-cat√©gories et exemples.",
    difficulty: 4,
    answers: [
      { text: "A. Usuels : g√©lose nutritive", correct: true },
      { text: "B. Enrichis : g√©lose au sang", correct: true },
      { text: "C. √âlectifs : bouillon SFB (salmonelles)", correct: true },
      { text: "D. S√©lectifs : Chapman/Hektoen", correct: true }
    ]
  },
  {
    question: "Applications industrielles et analytiques.",
    difficulty: 4,
    answers: [
      { text: "A. Production de toxines/antibiotiques", correct: true },
      { text: "B. Cellules pour vaccins/r√©actifs", correct: true },
      { text: "C. Dosage de vitamines/facteurs", correct: true },
      { text: "D. Culture virale antiviraux", correct: false }
    ]
  },

  // E. Tr√®s difficiles ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
  {
    question: "Besoins nutritifs d‚Äôune prototrophe.",
    difficulty: 5,
    answers: [
      { text: "A. Eau, √©nergie, C, N, min√©raux", correct: true },
      { text: "B. Facteurs de croissance indispensables", correct: false },
      { text: "C. Aucun facteur requis", correct: true },
      { text: "D. CO‚ÇÇ et lumi√®re seuls", correct: false }
    ]
  },
  {
    question: "Appariement esp√®ces‚Äìcat√©gories selon O‚ÇÇ.",
    difficulty: 5,
    answers: [
      { text: "A. Pseudomonas/Mycobacterium ‚Äî a√©robies", correct: true },
      { text: "B. Bacteroides/Clostridium ‚Äî ana√©robies", correct: true },
      { text: "C. Escherichia ‚Äî facultative", correct: true },
      { text: "D. Streptococcus pyogenes ‚Äî micro-a√©rophile strict", correct: false }
    ]
  },
  {
    question: "Phase stationnaire : formulations exactes.",
    difficulty: 5,
    answers: [
      { text: "A. Nombre viable constant", correct: true },
      { text: "B. √âquilibre division/mort", correct: true },
      { text: "C. Reprise apr√®s ajout ", correct: false },
      { text: "D. √âpuisement des nutriments", correct: true }
    ]
  },
  {
    question: "Cat√©gories nutritionnelles crois√©es.",
    difficulty: 5,
    answers: [
      { text: "A. Phototrophe / Chimiotrophe", correct: true },
      { text: "B. Lithotrophe / Organotrophe", correct: true },
      { text: "C. Autotrophe / H√©t√©rotrophe", correct: true },
      { text: "D. Prototrophe / Auxotrophe", correct: true }
    ]
  },
  {
    question: "Antibioth√©rapie et mesure de l‚Äôactivit√©.",
    difficulty: 5,
    answers: [
      { text: "A. Modifications de la courbe de croissance ‚Üí activit√© antibiotique", correct: true },
      { text: "B. Num√©ration viable seule comme preuve ", correct: false },
      { text: "C. Courbe log(N)/temps comme r√©f√©rence", correct: true },
      { text: "D. Poids sec sp√©cifique √† l‚Äôantibiotique ", correct: false }
    ]
  }
],
'Les antibiotiques': [
  // A. Bon √©l√®ve ‚≠ê
  {
    question: "La famille des Œ≤-lactamines regroupe des sous-familles ayant un m√™me noyau Œ≤-lactame et un mode d‚Äôaction similaire.",
    difficulty: 1,
    answers: [
      { text: "A. Cible commune : PLP impliqu√©es dans la synth√®se du peptidoglycane", correct: true },
      { text: "B. Effet bact√©ricide temps-d√©pendant", correct: true },
      { text: "C. Parent√© de m√©canismes de r√©sistance", correct: true },
      { text: "D. Activit√© sur l‚ÄôADN gyrase ind√©pendante des PLP", correct: false }
    ]
  },
  {
    question: "La p√©nicilline G (benzyl-p√©nicilline) est d√©crite comme‚Ä¶",
    difficulty: 1,
    answers: [
      { text: "A. D√©couverte en 1929, utilis√©e d√®s 1941", correct: true },
      { text: "B. D√©truite par acidit√© gastrique ‚Üí non orale", correct: true },
      { text: "C. Inactive sur les bacilles √† Gram n√©gatif", correct: true },
      { text: "D. Active sur 95% des staphylocoques", correct: false }
    ]
  },
  {
    question: "Les P√©nicillines M (m√©thicilline/oxacilline)‚Ä¶",
    difficulty: 1,
    answers: [
      { text: "A. Anti-staphylococciques actives sur les souches productrices de p√©nicillinase", correct: true },
      { text: "B. Administrables par voie orale et parent√©rale", correct: true },
      { text: "C. Contourn√©es par les souches MRSA", correct: true },
      { text: "D. Anti-Pseudomonas", correct: false }
    ]
  },
  {
    question: "Les aminop√©nicillines (ampicilline/amoxicilline)‚Ä¶",
    difficulty: 1,
    answers: [
      { text: "A. Spectre √©largi √† certains BGN, inactives sur KES et Pseudomonas", correct: true },
      { text: "B. Meilleure diffusion m√©ning√©e", correct: true },
      { text: "C. Inactivation par les p√©nicillinases", correct: true },
      { text: "D. Stables face aux p√©nicillinases", correct: false }
    ]
  },
  {
    question: "Les glycopeptides (vancomycine/t√©icoplanine)‚Ä¶",
    difficulty: 1,
    answers: [
      { text: "A. Actifs sur les Gram +, dont MRSA", correct: true },
      { text: "B. Bact√©ricides temps-d√©pendants", correct: true },
      { text: "C. Ciblent D-Ala‚ÄìD-Ala du pentapeptide", correct: true },
      { text: "D. Inhibent l‚ÄôADN topoisom√©rase IV", correct: false }
    ]
  },

  // B. Tr√®s bon √©l√®ve ‚≠ê‚≠ê
  {
    question: "Cible des Œ≤-lactamines : les PLP‚Ä¶",
    difficulty: 2,
    answers: [
      { text: "A. Activit√©s transpeptidase, carboxypeptidase et transglycosylase", correct: true },
      { text: "B. Leur inhibition bloque la formation des ponts de r√©ticulation", correct: true },
      { text: "C. Leur inhibition induit des formes bizarro√Ødes menant √† la lyse", correct: true },
      { text: "D. Contr√¥lent la perm√©abilit√© membranaire", correct: false }
    ]
  },
  {
    question: "Carboxy- et acyl-ur√©ido-p√©nicillines :",
    difficulty: 2,
    answers: [
      { text: "A. Actives sur Pseudomonas aeruginosa", correct: true },
      { text: "B. Usage parent√©ral hospitalier", correct: true },
      { text: "C. Stables √† toutes les Œ≤-lactamases", correct: false },
      { text: "D. Actives sur certains BGN r√©sistants √† l‚Äôampicilline", correct: true }
    ]
  },
  {
    question: "Inhibiteurs de Œ≤-lactamases :",
    difficulty: 2,
    answers: [
      { text: "A. Acide clavulanique : inhibe la majorit√© des p√©nicillinases", correct: true },
      { text: "B. Association amoxicilline + acide clavulanique (Augmentin)", correct: true },
      { text: "C. Avibactam : non Œ≤-lactamine, s‚Äôassocie √† la ceftazidime", correct: true },
      { text: "D. Bact√©ricides puissants seuls", correct: false }
    ]
  },
  {
    question: "C√©phalosporines 1re g√©n√©ration :",
    difficulty: 2,
    answers: [
      { text: "A. R√©sistantes aux p√©nicillinases mais d√©truites par c√©phalosporinases", correct: true },
      { text: "B. Actives sur BGN, inactives sur Pseudomonas", correct: true },
      { text: "C. C√©falexine, c√©fazoline‚Ä¶ orales/injectables", correct: true },
      { text: "D. Anti-MRSA", correct: false }
    ]
  },
  {
    question: "C√©phalosporines 3e‚Äì5e g√©n√©rations :",
    difficulty: 2,
    answers: [
      { text: "A. Large spectre, certaines anti-Pseudomonas", correct: true },
      { text: "B. Cefepime = 4e g√©n√©ration", correct: true },
      { text: "C. Ceftaroline/ceftobiprole = anti-MRSA", correct: true },
      { text: "D. Toutes inactives sur BGN", correct: false }
    ]
  },
  {
    question: "Carbap√©n√®mes :",
    difficulty: 2,
    answers: [
      { text: "A. D√©riv√©s de la thi√©namycine", correct: true },
      { text: "B. Large spectre et stables vis-√†-vis des Œ≤-lactamases", correct: true },
      { text: "C. Parent√©raux hospitaliers", correct: true },
      { text: "D. Limit√©s aux CG+", correct: false }
    ]
  },
  {
    question: "Monobactames (aztr√©onam)‚Ä¶",
    difficulty: 2,
    answers: [
      { text: "A. Actifs uniquement sur BGN", correct: true },
      { text: "B. Œ≤-lactamines", correct: true },
      { text: "C. Actifs sur Pseudomonas", correct: true },
      { text: "D. Anti-Gram+ de premier choix", correct: false }
    ]
  },
  {
    question: "Fosfomycine :",
    difficulty: 2,
    answers: [
      { text: "A. Large spectre, lentement bact√©ricide", correct: true },
      { text: "B. Inhibe la pyruvyl-transf√©rase", correct: true },
      { text: "C. Forme trom√©tamol orale pour cystite", correct: true },
      { text: "D. Seulement topique", correct: false }
    ]
  },
  {
    question: "Polymyxines :",
    difficulty: 2,
    answers: [
      { text: "A. Se fixent aux phospholipides", correct: true },
      { text: "B. Actives sur BGN", correct: true },
      { text: "C. Peu absorb√©es par voie orale", correct: true },
      { text: "D. Anti-Gram+ principales", correct: false }
    ]
  },
  {
    question: "Aminosides :",
    difficulty: 2,
    answers: [
      { text: "A. Ciblent 30S, erreurs de lecture", correct: true },
      { text: "B. Oto- et n√©phrotoxicit√©", correct: true },
      { text: "C. Synergie avec Œ≤-lactamines", correct: true },
      { text: "D. Actifs sur ana√©robies", correct: false }
    ]
  },

  // C. Excellent ‚≠ê‚≠ê‚≠ê
  {
    question: "Macrolides (MLSK)‚Ä¶",
    difficulty: 3,
    answers: [
      { text: "A. Bact√©riostatiques, 50S", correct: true },
      { text: "B. Spectre proche de p√©nicilline G", correct: true },
      { text: "C. Inactifs sur ent√©robact√©ries/Pseudomonas", correct: true },
      { text: "D. Tous stables en milieu acide", correct: false }
    ]
  },
  {
    question: "Lincosamides et streptogramines‚Ä¶",
    difficulty: 3,
    answers: [
      { text: "A. Action sur 50S", correct: true },
      { text: "B. M√™me squelette chimique", correct: false },
      { text: "C. Regroupement par m√©canisme d‚Äôaction", correct: true },
      { text: "D. Class√©s avec k√©tolides", correct: true }
    ]
  },
  {
    question: "Ph√©nicol√©s :",
    difficulty: 3,
    answers: [
      { text: "A. Large spectre, bon passage tissulaire", correct: true },
      { text: "B. R√©serv√©s √† la fi√®vre typho√Øde", correct: true },
      { text: "C. Toxicit√© h√©matopo√Ø√©tique", correct: true },
      { text: "D. Inhibiteurs 30S", correct: false }
    ]
  },
  {
    question: "Acide fusidique :",
    difficulty: 3,
    answers: [
      { text: "A. Bact√©riostatique, bact√©ricide √† fortes doses", correct: true },
      { text: "B. Inhibe facteur d‚Äô√©longation G", correct: true },
      { text: "C. Anti-staphylococcique", correct: true },
      { text: "D. Cible l‚ÄôADN gyrase", correct: false }
    ]
  },
  {
    question: "Oxazolidinones (lin√©zolide)‚Ä¶",
    difficulty: 3,
    answers: [
      { text: "A. Bact√©riostatiques, 50S", correct: true },
      { text: "B. Actives sur CG+ r√©sistants", correct: true },
      { text: "C. M√©canisme partiellement √©lucid√©", correct: true },
      { text: "D. Agissent sur la membrane", correct: false }
    ]
  },
  {
    question: "Quinolones classiques :",
    difficulty: 3,
    answers: [
      { text: "A. Bact√©riostatiques", correct: true },
      { text: "B. Spectre √©troit BGN", correct: true },
      { text: "C. R√©sistances √©lev√©es", correct: true },
      { text: "D. Inhibent ADN gyrase/topoIV", correct: true }
    ]
  },
  {
    question: "Fluoroquinolones :",
    difficulty: 3,
    answers: [
      { text: "A. Fluor√©es (F en 6, substituant en 7)", correct: true },
      { text: "B. Large spectre (BGN, CGP, ana√©robies, mycobact√©ries)", correct: true },
      { text: "C. Strictement anti-Gram+", correct: false },
      { text: "D. Extension chimique des quinolones", correct: true }
    ]
  },
  {
    question: "Amidino-p√©nicillines (m√©cillinam/pivm√©cillinam)‚Ä¶",
    difficulty: 3,
    answers: [
      { text: "A. Actives sur BGN uniquement", correct: true },
      { text: "B. M√©cillinam parent√©ral, pivm√©cillinam oral", correct: true },
      { text: "C. Large activit√© anti-Gram+", correct: false },
      { text: "D. P√©names", correct: true }
    ]
  },
  {
    question: "Associations p√©nicilline + inhibiteur :",
    difficulty: 3,
    answers: [
      { text: "A. Amoxicilline + acide clavulanique", correct: true },
      { text: "B. Ticarcilline + acide clavulanique", correct: true },
      { text: "C. Pip√©racilline + tazobactam", correct: true },
      { text: "D. Ceftolozane + tazobactam", correct: true }
    ]
  },

  // D. Difficiles ‚≠ê‚≠ê‚≠ê‚≠ê
  {
    question: "C√©phalosporines : int√©r√™t et g√©n√©rations",
    difficulty: 4,
    answers: [
      { text: "A. Activit√© sur BGN", correct: true },
      { text: "B. Classification par g√©n√©rations", correct: true },
      { text: "C. Stabilit√© universelle", correct: false },
      { text: "D. Exemples oraux/injectables cit√©s", correct: true }
    ]
  },
  {
    question: "PK/PD et propri√©t√©s cit√©es :",
    difficulty: 4,
    answers: [
      { text: "A. Œ≤-lactamines : temps-d√©pendantes", correct: true },
      { text: "B. P√©nicilline G : T¬Ω ‚âà 30 min", correct: true },
      { text: "C. Fosfomycine : lentement bact√©ricide", correct: true },
      { text: "D. Polymyxines : tr√®s bien absorb√©es", correct: false }
    ]
  },
  {
    question: "P√©nicillines A (aminop√©nicillines)‚Ä¶",
    difficulty: 4,
    answers: [
      { text: "A. Amoxicilline : taux s√©riques sup√©rieurs", correct: true },
      { text: "B. √âlimination plus lente", correct: true },
      { text: "C. Bonne diffusion m√©ning√©e", correct: true },
      { text: "D. Invariabilit√© face aux p√©nicillinases", correct: false }
    ]
  },
  {
    question: "C√©phalosporines 2e g√©n√©ration :",
    difficulty: 4,
    answers: [
      { text: "A. Relativement r√©sistantes", correct: true },
      { text: "B. Inactives sur Pseudomonas", correct: true },
      { text: "C. Strictement orales", correct: false },
      { text: "D. Spectre interm√©diaire", correct: true }
    ]
  },
  {
    question: "Effets ind√©sirables :",
    difficulty: 4,
    answers: [
      { text: "A. Allergie, effet convulsivant (Œ≤-lactamines)", correct: true },
      { text: "B. Oto-/n√©phrotoxicit√© (aminosides)", correct: true },
      { text: "C. Toxicit√© h√©matopo√Ø√©tique (ph√©nicol√©s)", correct: true },
      { text: "D. Toxicit√© syst√©mique glycopeptides", correct: false }
    ]
  },
  {
    question: "Monobactames, carbap√©n√®mes et c√©phalosporines 5G :",
    difficulty: 4,
    answers: [
      { text: "A. Diversit√© des Œ≤-lactamines", correct: true },
      { text: "B. Spectres sp√©cifiques (aztr√©onam BGN)", correct: true },
      { text: "C. Tous oraux", correct: false },
      { text: "D. √âvolution vers activit√© anti-MRSA", correct: true }
    ]
  },
  {
    question: "Polymyxines : voies d‚Äôadministration",
    difficulty: 4,
    answers: [
      { text: "A. Polymyxine B topique", correct: true },
      { text: "B. Colistine orale, parent√©rale, inhal√©e", correct: true },
      { text: "C. Absorption digestive faible", correct: true },
      { text: "D. Prioritairement contre CG+", correct: false }
    ]
  },
  {
    question: "MLSK : justification du regroupement",
    difficulty: 4,
    answers: [
      { text: "A. Action 50S commune", correct: true },
      { text: "B. Noyau lactonique identique", correct: false },
      { text: "C. Proximit√© de m√©canisme", correct: true },
      { text: "D. Tous bact√©ricides rapides", correct: false }
    ]
  },
  {
    question: "Fluoroquinolones : extension du spectre",
    difficulty: 4,
    answers: [
      { text: "A. Ent√©robact√©ries/Pseudomonas", correct: true },
      { text: "B. CGP (staphylocoques)", correct: true },
      { text: "C. Ana√©robies et mycobact√©ries", correct: true },
      { text: "D. Cible peptidoglycane", correct: false }
    ]
  },
  {
    question: "Œ≤-lactamines : familles structurales",
    difficulty: 4,
    answers: [
      { text: "A. Noyau Œ≤-lactame commun", correct: true },
      { text: "B. Cible = PLP", correct: true },
      { text: "C. Action sur lipides membranaires", correct: false },
      { text: "D. Classification structurale", correct: true }
    ]
  },

  // E. Tr√®s difficiles ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
  {
    question: "Limites de spectre :",
    difficulty: 5,
    answers: [
      { text: "A. Aminop√©nicillines inactives sur KES/Pseudomonas", correct: true },
      { text: "B. C√©phalosporines 1G/2G inactives sur Pseudomonas", correct: true },
      { text: "C. Monobactames : pas d‚Äôaction sur CG+", correct: true },
      { text: "D. Macrolides : actifs sur ent√©robact√©ries", correct: false }
    ]
  },
  {
    question: "M√©canisme et cibles par familles :",
    difficulty: 5,
    answers: [
      { text: "A. Inhibition PLP/peptidoglycane ‚Üí Œ≤-lactamines", correct: true },
      { text: "B. Liaison D-Ala‚ÄìD-Ala ‚Üí glycopeptides", correct: true },
      { text: "C. Fixation phospholipides ‚Üí polymyxines", correct: true },
      { text: "D. ADN gyrase ‚Üí ph√©nicol√©s", correct: false }
    ]
  },
  {
    question: "Activit√© anti-Pseudomonas :",
    difficulty: 5,
    answers: [
      { text: "A. Certaines c√©phalosporines 3G (ceftazidime)", correct: true },
      { text: "B. Carboxy-/acyl-ur√©ido-p√©nicillines", correct: true },
      { text: "C. Aztr√©onam (BGN, dont Pseudomonas)", correct: true },
      { text: "D. Aminop√©nicillines", correct: false }
    ]
  },
  {
    question: "Points pi√©geux :",
    difficulty: 5,
    answers: [
      { text: "A. Macrolides : spectre proche p√©nicilline G, inactifs sur ent√©robact√©ries/Pseudomonas", correct: true },
      { text: "B. Ph√©nicol√©s : diffusion ganglionnaire √©lev√©e", correct: true },
      { text: "C. Fosfomycine : monodose cystite femme jeune", correct: true },
      { text: "D. Aminosides : actifs sur ana√©robies", correct: false }
    ]
  },
  {
    question: "Familles et r√©sistances naturelles :",
    difficulty: 5,
    answers: [
      { text: "A. Ent√©rocoques/Listeria ‚Üí r√©sistants c√©phalosporines 3G", correct: true },
      { text: "B. MRSA ‚Üí r√©sistants p√©nicillines M", correct: true },
      { text: "C. Ana√©robies ‚Üí r√©sistants aminosides", correct: true },
      { text: "D. Monobactames actifs sur CG+ et CG-", correct: false }
    ]
  }
],

  };

  const questions = questionsData[lesson] || [];
  const container = document.getElementById("questionsContainer");

  questions.forEach((q) => {
    const block = document.createElement("div");
    block.className = "question-block";
    const selectedAnswers = new Set();
    const correctAnswers = q.answers.filter(a => a.correct).map(a => a.text);

    let starsHTML = "";
    for (let s = 1; s <= 5; s++) {
      starsHTML += `<span class="star" style="color:${s <= q.difficulty ? 'gold' : 'rgba(255,255,255,0.2)'};">‚òÖ</span>`;
    }

    block.innerHTML = `
      <div class="difficulty">${starsHTML}</div>
      <div class="question-text">${q.question}</div>
      <div class="answers">
        ${q.answers.map(a => `<div class="answer">${a.text}</div>`).join("")}
      </div>
      <div class="control-buttons">
        <button class="submit">‚úÖ Ÿáÿ∞Ÿá ŸáŸä ÿ•ÿ¨ÿßÿ®ÿ™Ÿä</button>
        <button class="reset">üîÅ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©</button>
        <button class="show-solution" style="display:none;">üí° ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©</button>
      </div>
    `;

    const answersDivs = block.querySelectorAll(".answer");
    answersDivs.forEach(ans => {
      ans.onclick = () => {
        ans.classList.toggle("selected");
        const text = ans.textContent;
        if (selectedAnswers.has(text)) selectedAnswers.delete(text);
        else selectedAnswers.add(text);
      };
    });

    block.querySelector(".submit").onclick = () => {
      const selected = Array.from(selectedAnswers);
      block.querySelectorAll(".feedback").forEach(fb => fb.remove());
      const feedback = document.createElement("div");
      feedback.className = "feedback";

      if (selected.length === 0) {
        feedback.textContent = "‚ùó ŸÑŸÖ ÿ™ÿÆÿ™ÿ± ÿ£Ÿä ÿ•ÿ¨ÿßÿ®ÿ©";
        feedback.classList.add("incorrect");
      } else if (selected.length === correctAnswers.length && selected.every(t => correctAnswers.includes(t))) {
        feedback.textContent = "‚úÖ ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ÿµÿ≠Ÿäÿ≠ÿ©!";
        feedback.classList.add("correct");
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      } else {
        feedback.textContent = "‚ùå ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ÿÆÿßÿ∑ÿ¶ÿ©";
        feedback.classList.add("incorrect");
      }

      block.appendChild(feedback);
      block.querySelector(".show-solution").style.display = "inline-block";
    };

    block.querySelector(".reset").onclick = () => {
      selectedAnswers.clear();
      block.querySelectorAll(".answer").forEach(a => a.classList.remove("selected","correct","incorrect"));
      block.querySelectorAll(".feedback").forEach(f => f.remove());
      block.querySelector(".show-solution").style.display = "none";
    };

    block.querySelector(".show-solution").onclick = () => {
      answersDivs.forEach(ans => {
        if (correctAnswers.includes(ans.textContent)) ans.classList.add("correct");
        else ans.classList.add("incorrect");
      });
    };

    container.appendChild(block);
  });

  function goBack() {
    window.location.href = "lesson.html";
  }
</script>
<script src="./layout-fix.js"></script>

</body>
</html>
